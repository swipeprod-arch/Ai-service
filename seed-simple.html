<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üé≤ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö (–ü–†–û–°–¢–û–ô)</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 {
      font-size: 32px;
      margin-bottom: 10px;
      color: #333;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 16px;
    }
    .warning {
      background: #fff3cd;
      border: 2px solid #ffc107;
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 20px;
      color: #856404;
    }
    .warning strong {
      display: block;
      margin-bottom: 5px;
      font-size: 16px;
    }
    button {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      margin-bottom: 15px;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    .log {
      background: #1a1a1a;
      color: #00ff00;
      padding: 20px;
      border-radius: 12px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      max-height: 400px;
      overflow-y: auto;
      line-height: 1.6;
      display: none;
    }
    .log.active {
      display: block;
    }
    .log-line {
      margin-bottom: 5px;
    }
    .log-success { color: #00ff00; }
    .log-error { color: #ff4444; }
    .log-info { color: #44aaff; }
    .log-warning { color: #ffaa00; }
    input {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      margin-bottom: 15px;
    }
    input:focus {
      outline: none;
      border-color: #667eea;
    }
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé≤ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö</h1>
    <p class="subtitle">–ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è - —É–∫–∞–∂–∏ —Å–≤–æ–π user_id</p>

    <div class="warning">
      <strong>‚ö†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong>
      1. –ó–∞–π–¥–∏ –Ω–∞ —Å–∞–π—Ç –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Å—è<br>
      2. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)<br>
      3. –í–≤–µ–¥–∏: <code style="background: #fff; padding: 2px 6px; border-radius: 4px; font-family: monospace;">(await supabase.auth.getUser()).data.user.id</code><br>
      4. –°–∫–æ–ø–∏—Ä—É–π —Å–≤–æ–π user_id –∏ –≤—Å—Ç–∞–≤—å –Ω–∏–∂–µ
    </div>

    <label>–¢–≤–æ–π User ID:</label>
    <input type="text" id="userId" value="5be410bf-b654-467e-ae97-70d65be3fa75">

    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫ (1-100):</label>
    <input type="number" id="count" value="10" min="1" max="100">

    <button id="startBtn" onclick="generate()">üöÄ –ù–∞—á–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é</button>

    <div class="log" id="log"></div>
  </div>

  <script>
    const SUPABASE_URL = "https://orxzpefskbkcyuoobkol.supabase.co";
    const SUPABASE_ANON_KEY = "sb_publishable_fj9X3SDLjXiL0v3pajtMwA_fTYhN3us";
    const sb = window.supabase ? window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY) : null;

    const CATEGORIES = ['design', 'video', 'photo', 'text', 'audio'];
    const ROLES = {
      design: ['UI/UX –î–∏–∑–∞–π–Ω–µ—Ä', '–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω–µ—Ä', '–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä', '–ú–æ—É—à–Ω-–¥–∏–∑–∞–π–Ω–µ—Ä'],
      video: ['–í–∏–¥–µ–æ–≥—Ä–∞—Ñ', '–í–∏–¥–µ–æ–º–æ–Ω—Ç–∞–∂–µ—Ä', '–û–ø–µ—Ä–∞—Ç–æ—Ä', '–†–µ–∂–∏—Å—Å–µ—Ä'],
      photo: ['–§–æ—Ç–æ–≥—Ä–∞—Ñ', '–†–µ—Ç—É—à–µ—Ä', '–§—É–¥-—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ', '–ü–æ—Ä—Ç—Ä–µ—Ç–∏—Å—Ç'],
      text: ['–ö–æ–ø–∏—Ä–∞–π—Ç–µ—Ä', '–†–µ–¥–∞–∫—Ç–æ—Ä', '–ö–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä', 'SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç'],
      audio: ['–ó–≤—É–∫–æ—Ä–µ–∂–∏—Å—Å–µ—Ä', '–ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä', '–î–∏–∫—Ç–æ—Ä', '–ü–æ–¥–∫–∞—Å—Ç–µ—Ä']
    };
    const NAMES = ['–ê–ª–µ–∫—Å–∞–Ω–¥—Ä', '–ú–∞—Ä–∏—è', '–î–º–∏—Ç—Ä–∏–π', '–ê–Ω–Ω–∞', '–°–µ—Ä–≥–µ–π', '–ï–ª–µ–Ω–∞', '–ê–Ω–¥—Ä–µ–π', '–û–ª—å–≥–∞'];
    const SURNAMES = ['–°–º–∏—Ä–Ω–æ–≤', '–ò–≤–∞–Ω–æ–≤', '–ö—É–∑–Ω–µ—Ü–æ–≤', '–ü–æ–ø–æ–≤', '–°–æ–∫–æ–ª–æ–≤', '–õ–µ–±–µ–¥–µ–≤', '–ö–æ–∑–ª–æ–≤'];

    function log(msg, type = 'info') {
      const logEl = document.getElementById('log');
      logEl.classList.add('active');
      const line = document.createElement('div');
      line.className = `log-line log-${type}`;
      line.textContent = `[${new Date().toLocaleTimeString('ru-RU')}] ${msg}`;
      logEl.appendChild(line);
      logEl.scrollTop = logEl.scrollHeight;
    }

    function random(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function randomItem(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function randomImageUrl() {
      const w = random(800, 1920);
      const h = random(600, 1080);
      const id = random(1, 1000);
      return `https://picsum.photos/id/${id}/${w}/${h}`;
    }

    window.generate = async function() {
      const userId = document.getElementById('userId').value.trim();
      const count = parseInt(document.getElementById('count').value);
      const btn = document.getElementById('startBtn');

      if (!userId) {
        alert('‚ùå –í–≤–µ–¥–∏ —Å–≤–æ–π user_id!');
        return;
      }

      if (!sb) {
        alert('‚ùå Supabase –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!');
        return;
      }

      btn.disabled = true;
      log('üöÄ –ù–∞—á–∏–Ω–∞—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é...', 'info');

      try {
        // –ê–≤—Ç–æ—Ä–∏–∑—É–µ–º—Å—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        log(`üîë –ò—Å–ø–æ–ª—å–∑—É—é user_id: ${userId}`, 'info');

        for (let i = 0; i < count; i++) {
          const category = randomItem(CATEGORIES);
          const name = `${randomItem(NAMES)} ${randomItem(SURNAMES)}`;
          
          // –°–æ–∑–¥–∞–µ–º —ç–∫—Å–ø–µ—Ä—Ç–∞
          const { data: expert, error: expertError } = await sb
            .from('experts')
            .insert([{
              user_id: userId,
              category: category,
              name: name,
              role: randomItem(ROLES[category]),
              description: '–°–æ–∑–¥–∞—é –∫—Ä—É—Ç–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –±—Ä–µ–Ω–¥–æ–≤.',
              short_info: `${random(1, 10)} –ª–µ—Ç –æ–ø—ã—Ç–∞`,
              price_from: `–æ—Ç ${random(5, 50)} 000 ‚ÇΩ`,
              delivery_time: `${random(1, 14)} –¥–Ω–µ–π`,
              telegram: `@${name.toLowerCase().replace(/\s+/g, '_')}`,
              status: 'approved'
            }])
            .select()
            .single();

          if (expertError) {
            log(`‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ #${i+1}: ${expertError.message}`, 'error');
            continue;
          }

          log(`‚úÖ –≠–∫—Å–ø–µ—Ä—Ç #${i+1}: ${expert.name}`, 'success');

          // –°–æ–∑–¥–∞–µ–º 2-3 –∞–ª—å–±–æ–º–∞
          const albumCount = random(2, 3);
          for (let j = 0; j < albumCount; j++) {
            const { data: album } = await sb
              .from('expert_albums')
              .insert([{
                expert_id: expert.id,
                user_id: userId,
                title: `–ê–ª—å–±–æ–º ${j+1}`,
                sort_order: j
              }])
              .select()
              .single();

            if (!album) continue;

            // –°–æ–∑–¥–∞–µ–º 3-5 –º–µ–¥–∏–∞
            const mediaCount = random(3, 5);
            for (let k = 0; k < mediaCount; k++) {
              await sb
                .from('expert_media')
                .insert([{
                  expert_id: expert.id,
                  user_id: userId,
                  album_id: album.id,
                  media_type: 'image',
                  storage_path: randomImageUrl(),
                  file_name: `image_${Date.now()}_${random(1000, 9999)}.jpg`,
                  mime_type: 'image/jpeg',
                  size_bytes: random(500000, 5000000),
                  is_cover: k === 0
                }]);
            }
          }

          // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
          if (i % 5 === 0 && i > 0) {
            await new Promise(r => setTimeout(r, 300));
          }
        }

        log(`üéâ –ì–æ—Ç–æ–≤–æ! –°–æ–∑–¥–∞–Ω–æ ${count} —ç–∫—Å–ø–µ—Ä—Ç–æ–≤`, 'success');

      } catch (error) {
        log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
        console.error(error);
      } finally {
        btn.disabled = false;
      }
    }

    log('‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!', 'info');
    log('üí° –í–≤–µ–¥–∏ —Å–≤–æ–π user_id –∏ –Ω–∞–∂–º–∏ "–ù–∞—á–∞—Ç—å"', 'info');
  </script>
</body>
</html>

