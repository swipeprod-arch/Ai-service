<!DOCTYPE html> <html> <head> <meta charset="utf-8" /> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!--metatextblock--> 
<title>–ö–∞—Ç–∞–ª–æ–≥ AI-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ ‚Äî –∑–∞–∫–∞–∑–∞—Ç—å —Ä–∏–ª—Å—ã, –¥–∏–∑–∞–π–Ω, –±–æ—Ç–æ–≤ –Ω–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ | –ò–ò—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ</title> 
<meta name="description" content="–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å AI-—É—Å–ª—É–≥: —Ä–∏–ª—Å—ã –∏ –≤–∏–¥–µ–æ –Ω–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏, AI-–¥–∏–∑–∞–π–Ω Midjourney, Telegram-–±–æ—Ç—ã —Å ChatGPT, –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ WB/Ozon, –ª–µ–Ω–¥–∏–Ω–≥–∏. –°–º–æ—Ç—Ä–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –ø–∏—à–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º –Ω–∞–ø—Ä—è–º—É—é. –ë–µ–∑ –∫–æ–º–∏—Å—Å–∏–π." /> 
<meta name="keywords" content="AI —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã, –Ω–µ–π—Ä–æ—Å–µ—Ç—å –≤–∏–¥–µ–æ, –∑–∞–∫–∞–∑–∞—Ç—å —Ä–∏–ª—Å—ã, midjourney –¥–∏–∑–∞–π–Ω, telegram –±–æ—Ç gpt, –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ wildberries, ai —Å–∞–π—Ç" />
<meta property="og:url" content="https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/" /> 
<meta property="og:title" content="–ö–∞—Ç–∞–ª–æ–≥ AI-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ ‚Äî —Ä–∏–ª—Å—ã, –¥–∏–∑–∞–π–Ω, –±–æ—Ç—ã –Ω–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏" /> 
<meta property="og:description" content="–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å AI-—É—Å–ª—É–≥: —Ä–∏–ª—Å—ã –Ω–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏, AI-–¥–∏–∑–∞–π–Ω, Telegram-–±–æ—Ç—ã, –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ WB/Ozon, –ª–µ–Ω–¥–∏–Ω–≥–∏. –°–º–æ—Ç—Ä–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –ø–∏—à–∏ –Ω–∞–ø—Ä—è–º—É—é." /> 
<meta property="og:type" content="website" /> 
<meta property="og:image" content="https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/images/ai-logo.png" /> 
<meta property="og:locale" content="ru_RU" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="–ö–∞—Ç–∞–ª–æ–≥ AI-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ | –ò–ò—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ" />
<meta name="twitter:description" content="–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å AI-—É—Å–ª—É–≥: —Ä–∏–ª—Å—ã, –¥–∏–∑–∞–π–Ω, –±–æ—Ç—ã, WB/Ozon, —Å–∞–π—Ç—ã. –ë–µ–∑ –∫–æ–º–∏—Å—Å–∏–π." />
<link rel="canonical" href="https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/"> 
<!--/metatextblock-->

<!-- Schema.org —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "–ò–ò—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ",
  "alternateName": "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å AI-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤",
  "url": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/",
  "description": "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å AI-—É—Å–ª—É–≥: —Ä–∏–ª—Å—ã –Ω–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏, AI-–¥–∏–∑–∞–π–Ω, Telegram-–±–æ—Ç—ã, –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ WB/Ozon, –ª–µ–Ω–¥–∏–Ω–≥–∏",
  "inLanguage": "ru-RU",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/experts?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "–ò–ò—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ",
  "url": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/",
  "logo": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/images/ai-logo.png",
  "description": "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å AI-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –¥–ª—è –∑–∞–∫–∞–∑–∞ —É—Å–ª—É–≥ –ø–æ –≤–∏–¥–µ–æ, –¥–∏–∑–∞–π–Ω—É, –±–æ—Ç–∞–º, –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º –∏ —Å–∞–π—Ç–∞–º",
  "sameAs": [],
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "customer service",
    "availableLanguage": "Russian"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ AI-—É—Å–ª—É–≥",
  "description": "5 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π AI-—É—Å–ª—É–≥ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "AI-–í–∏–¥–µ–æ",
      "description": "–†–∏–ª—Å—ã, —Ä–µ–∫–ª–∞–º–∞, –º–æ–Ω—Ç–∞–∂, —Å—É–±—Ç–∏—Ç—Ä—ã, –æ–∑–≤—É—á–∫–∞ —Å –ø–æ–º–æ—â—å—é –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π",
      "url": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/video"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "AI-–î–∏–∑–∞–π–Ω",
      "description": "–ö—Ä–µ–∞—Ç–∏–≤—ã –¥–ª—è —Ä–µ–∫–ª–∞–º—ã, —Å–æ—Ü—Å–µ—Ç–∏, –±—Ä–µ–Ω–¥–∏–Ω–≥ —Å Midjourney –∏ –¥—Ä—É–≥–∏–º–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º–∏",
      "url": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/design"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "AI-–ë–æ—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è",
      "description": "Telegram-–±–æ—Ç—ã, —á–∞—Ç-–±–æ—Ç—ã –¥–ª—è —Å–∞–π—Ç–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å CRM –Ω–∞ –±–∞–∑–µ ChatGPT",
      "url": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/bots"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "WB/Ozon —É–ø–∞–∫–æ–≤–∫–∞",
      "description": "–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞, SEO-—Ç–µ–∫—Å—Ç—ã, –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤",
      "url": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/marketplaces"
    },
    {
      "@type": "ListItem",
      "position": 5,
      "name": "AI-–°–∞–π—Ç—ã –∏ –ª–µ–Ω–¥–∏–Ω–≥–∏",
      "description": "–°–∞–π—Ç—ã –Ω–∞ Tilda, Framer, Webflow —Å AI-—Ç–µ–∫—Å—Ç–∞–º–∏ –∏ –¥–∏–∑–∞–π–Ω–æ–º",
      "url": "https://–∏–∏—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.—Ä—Ñ/sites"
    }
  ]
}
</script> <meta name="format-detection" content="telephone=no" /> <meta http-equiv="x-dns-prefetch-control" content="on"> <link rel="dns-prefetch" href="https://ws.tildacdn.com">  <link rel="shortcut icon" href="images/tildafavicon.ico" type="image/x-icon" />

<!-- Preload –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è LCP -->
<link rel="preload" href="css/custom.css" as="style">
<link rel="preload" href="css/tilda-grid-3.0.min.css" as="style">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preconnect" href="https://orxzpefskbkcyuoobkol.supabase.co" crossorigin>
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<link rel="dns-prefetch" href="https://orxzpefskbkcyuoobkol.supabase.co"> <!-- Assets --> <script src="https://neo.tildacdn.com/js/tilda-fallback-1.0.min.js" async charset="utf-8"></script> <link rel="stylesheet" href="css/tilda-grid-3.0.min.css" type="text/css" media="all" onerror="this.loaderr='y';"/> <link rel="stylesheet" href="css/tilda-blocks-page103804766.min.css?t=1765888373" type="text/css" media="all" onerror="this.loaderr='y';" /> <link rel="stylesheet" type="text/css" href="css/custom.css?t=1767535575"> <link rel="stylesheet" href="css/fonts-tildasans.css" type="text/css" media="all" onerror="this.loaderr='y';" /> <script nomodule src="js/tilda-polyfill-1.0.min.js" charset="utf-8"></script> <script type="text/javascript">function t_onReady(func) {if(document.readyState!='loading') {func();} else {document.addEventListener('DOMContentLoaded',func);}}
function t_onFuncLoad(funcName,okFunc,time) {if(typeof window[funcName]==='function') {okFunc();} else {setTimeout(function() {t_onFuncLoad(funcName,okFunc,time);},(time||100));}}</script> <script src="js/jquery-1.10.2.min.js" charset="utf-8" onerror="this.loaderr='y';"></script> <script src="js/tilda-scripts-3.0.min.js" charset="utf-8" defer onerror="this.loaderr='y';"></script> <script src="js/tilda-blocks-page103804766.min.js?t=1765888373" charset="utf-8" async onerror="this.loaderr='y';"></script> <script src="js/lazyload-1.3.min.export.js" charset="utf-8" async onerror="this.loaderr='y';"></script> <script src="js/tilda-events-1.0.min.js" charset="utf-8" async onerror="this.loaderr='y';"></script> <!-- nominify begin --><script>
window.AI_BIRZHA = {
  SUPABASE_URL: "https://orxzpefskbkcyuoobkol.supabase.co",
  SUPABASE_ANON_KEY: "sb_publishable_fj9X3SDLjXiL0v3pajtMwA_fTYhN3us",

  // ====== –ù–ê–°–¢–†–û–ô–ö–ò URL (–ò–ó–ú–ï–ù–ò –ó–î–ï–°–¨) ======
  // –õ–æ–∫–∞–ª—å–Ω—ã–π URL (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
  LOCAL_URL: "http://project13172919-.test",
  
  // –ü—Ä–æ–¥–∞–∫—à–Ω URL (–¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Å–∞–π—Ç–∞)
  PRODUCTION_URL: "https://e45318ft.beget.tech",  // ‚Üê —Ç–≤–æ–π –¥–æ–º–µ–Ω –Ω–∞ Beget
  
  // –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
  // –í–∞—Ä–∏–∞–Ω—Ç—ã: "auto" (–∞–≤—Ç–æ), "local" (–≤—Å–µ–≥–¥–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π), "production" (–≤—Å–µ–≥–¥–∞ –ø—Ä–æ–¥–∞–∫—à–Ω)
  ENVIRONMENT: "auto",
  // =========================================
  
  AUTH_PATH: "/auth",
  APPLY_PATH: "/apply",
  ADD_PATH: "/add",
  EXPERTS_PATH: "/experts"
};

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ PUBLIC_ORIGIN
(function() {
  const config = window.AI_BIRZHA;
  
  if (config.ENVIRONMENT === "auto") {
    // –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –µ—Å–ª–∏ –≤ URL –µ—Å—Ç—å localhost, .test, 127.0.0.1 ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–π
    const isLocal = /localhost|\.test|127\.0\.0\.1/.test(location.hostname);
    config.PUBLIC_ORIGIN = isLocal ? config.LOCAL_URL : config.PRODUCTION_URL;
  } else if (config.ENVIRONMENT === "local") {
    config.PUBLIC_ORIGIN = config.LOCAL_URL;
  } else if (config.ENVIRONMENT === "production") {
    config.PUBLIC_ORIGIN = config.PRODUCTION_URL;
  } else {
    // Fallback: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π origin
    config.PUBLIC_ORIGIN = location.origin;
  }
  
  console.log('üåç –û–∫—Ä—É–∂–µ–Ω–∏–µ:', config.ENVIRONMENT === "auto" ? (config.PUBLIC_ORIGIN === config.LOCAL_URL ? "LOCAL" : "PRODUCTION") : config.ENVIRONMENT.toUpperCase());
  console.log('üîó PUBLIC_ORIGIN:', config.PUBLIC_ORIGIN);
})();
</script> <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script> <script>
(function initSupabase(){
  function tryInit(){
    if(!window.AI_BIRZHA) return;

    // —É–∂–µ —Å–æ–∑–¥–∞–Ω–æ
    if(window.AI_BIRZHA.sb) return;

    // –∂–¥—ë–º –∑–∞–≥—Ä—É–∑–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ supabase-js
    if(window.supabase && typeof window.supabase.createClient === "function"){
      window.AI_BIRZHA.sb = window.supabase.createClient(
        window.AI_BIRZHA.SUPABASE_URL,
        window.AI_BIRZHA.SUPABASE_ANON_KEY
      );
      return;
    }

    setTimeout(tryInit, 80);
  }
  tryInit();
})();
</script> <style>
/* ====== AI-–ë–∏—Ä–∂–∞ ‚Ä¢ Neumorphism Light Theme ====== */
:root{
  --bg:#EEF3FA;
  --surface:#EEF3FA;
  --surface2:#F6F9FF;

  --text:#13233F;
  --muted:#5B6C86;

  --radius:22px;
  --radius-sm:16px;
  --max:1120px;

  --shadow-dark: rgba(163,177,198,.55);
  --shadow-light: rgba(255,255,255,.92);

  --stroke: rgba(255,255,255,.65);

  /* –°–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –∫–∞–∫ –≤ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–µ */
  --accent1:#1E78FF;
  --accent2:#00B7FF;
  --accent-grad: linear-gradient(135deg, var(--accent1) 0%, var(--accent2) 100%);
}

/* –±–∞–∑–∞ */
*{box-sizing:border-box}
html,body{
  margin:0;padding:0;
  background: radial-gradient(1200px 700px at 15% -10%, rgba(30,120,255,.18), transparent 60%),
              radial-gradient(900px 600px at 90% 0%, rgba(0,183,255,.12), transparent 55%),
              var(--bg) !important;
  color:var(--text) !important;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
}
img{max-width:100%;display:block}
a{color:inherit;text-decoration:none}

/* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.container{max-width:var(--max);margin:0 auto;padding:0 18px}

/* –Ω–∞–≤–±–∞—Ä */
.nav{
  position:sticky;top:0;z-index:50;
  background: rgba(238,243,250,.75) !important;
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255,255,255,.55);
  box-shadow: 10px 10px 22px rgba(163,177,198,.35);
}
.nav-inner{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:14px 0;}
.brand{display:flex;align-items:center;gap:10px;font-weight:900;letter-spacing:.2px}
.logo{
  width:34px;height:34px;border-radius:14px;
  background: var(--accent-grad);
  box-shadow: 10px 10px 20px rgba(163,177,198,.45), -10px -10px 20px rgba(255,255,255,.85);
}
.nav-links{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.nav-links a{
  padding:10px 12px;border-radius:16px;
  color:var(--muted) !important;
  background: transparent;
}
.nav-links a:hover{
  color:var(--text) !important;
  background: var(--surface);
  box-shadow: 8px 8px 18px rgba(163,177,198,.35), -8px -8px 18px rgba(255,255,255,.9);
}

/* –∫–Ω–æ–ø–∫–∏ */
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:10px;
  padding:12px 16px;border-radius:18px;
  border:1px solid var(--stroke);
  background: var(--surface);
  color:var(--text);
  cursor:pointer;
  transition: .15s transform ease, .15s box-shadow ease, .15s filter ease;
  box-shadow: 10px 10px 22px rgba(163,177,198,.45), -10px -10px 22px rgba(255,255,255,.9);
}
.btn:hover{transform: translateY(-1px); filter:saturate(1.05)}
.btn:active{
  transform: translateY(0);
  box-shadow: inset 10px 10px 22px rgba(163,177,198,.45), inset -10px -10px 22px rgba(255,255,255,.9);
}
.btn.primary{
  background: var(--accent-grad);
  border-color: rgba(30,120,255,.18);
  color:#fff;
  box-shadow: 12px 12px 26px rgba(30,120,255,.28), -10px -10px 22px rgba(255,255,255,.75);
}
.btn.primary:hover{filter:saturate(1.1) brightness(1.02)}
.btn.green{ /* –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –æ—Å—Ç–∞–ª–∞—Å—å –∑–µ–ª—ë–Ω–∞—è ‚Äî –¥–µ–ª–∞–µ–º –µ—ë –ø—Ä–æ—Å—Ç–æ "–∞–∫—Ü–µ–Ω—Ç–Ω–æ–π" */
  background: var(--accent-grad);
  border-color: rgba(0,183,255,.18);
  color:#fff;
}

/* hero */
.hero{padding:56px 0 26px}
.hero-grid{display:grid;grid-template-columns: 1.25fr .75fr; gap:20px; align-items:stretch}
@media (max-width: 900px){.hero-grid{grid-template-columns:1fr} .nav-links{display:none}}

/* –∫–∞—Ä—Ç–æ—á–∫–∏ */
.h-card,
.card{
  background: linear-gradient(145deg, #F8FBFF, #E7EDF7) !important;
  border:1px solid rgba(255,255,255,.65);
  border-radius: var(--radius);
  box-shadow: 14px 14px 28px rgba(163,177,198,.45), -14px -14px 28px rgba(255,255,255,.92);
}
.h-card{padding:26px}
.card{padding:16px;transition:.15s transform ease, .15s box-shadow ease}
.card:hover{
  transform: translateY(-2px);
  box-shadow: 18px 18px 34px rgba(163,177,198,.42), -18px -18px 34px rgba(255,255,255,.94);
}

/* –∑–∞–≥–æ–ª–æ–≤–∫–∏ */
.h-eyebrow{color:var(--muted);font-weight:700;letter-spacing:.2px}
.h-title{
  font-size:40px;line-height:1.05;margin:10px 0 12px;font-weight:900;
  background: var(--accent-grad);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}
@media (max-width: 520px){.h-title{font-size:34px}}
.section-title{
  font-size:22px;margin:0 0 12px;font-weight:900;
  background: var(--accent-grad);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}
.h-sub,.section-sub{color:var(--muted);line-height:1.55}
.card h3{margin:0 0 8px;font-size:18px;color:var(--text)}
.card p{margin:0 0 12px;color:var(--muted);line-height:1.55}

/* –ø–æ–∏—Å–∫ + –∏–Ω–ø—É—Ç—ã (–≤–¥–∞–≤–ª–µ–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç) */
.searchbox{
  display:flex;gap:10px;flex-wrap:wrap;
  padding:12px;border-radius: 20px;
  background: var(--surface);
  border:1px solid rgba(255,255,255,.7);
  box-shadow: inset 10px 10px 22px rgba(163,177,198,.45), inset -10px -10px 22px rgba(255,255,255,.92);
}
.searchbox input,
input,select,textarea{
  width:100%;
  padding:12px 12px;border-radius:16px;
  border:1px solid rgba(255,255,255,.7);
  background: var(--surface);
  color: var(--text);
  outline:none;
  box-shadow: inset 10px 10px 22px rgba(163,177,198,.40), inset -10px -10px 22px rgba(255,255,255,.92);
}
.searchbox input::placeholder{color: rgba(91,108,134,.8)}
label{font-size:13px;color:var(--muted)}

/* —Ç–µ–≥–∏/–ø–ª–∞—à–∫–∏ */
.tag{
  font-size:12px;
  color: var(--muted);
  padding:7px 12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.7);
  background: var(--surface);
  box-shadow: inset 8px 8px 18px rgba(163,177,198,.30), inset -8px -8px 18px rgba(255,255,255,.92);
}
.tagrow{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0 0}

/* KPI */
.kpis{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.kpi{
  flex:1 1 150px;
  border-radius:18px;
  padding:12px;
  border:1px solid rgba(255,255,255,.7);
  background: var(--surface);
  box-shadow: inset 10px 10px 22px rgba(163,177,198,.35), inset -10px -10px 22px rgba(255,255,255,.92);
}
.kpi .n{font-weight:900;font-size:18px;color:var(--text)}
.kpi .t{color:var(--muted);font-size:12px;margin-top:2px}

/* —Ä–∞–∑–¥–µ–ª—ã */
.section{padding:26px 0}
.grid{display:grid;gap:14px;grid-template-columns: repeat(3, minmax(0, 1fr));}
@media (max-width: 900px){.grid{grid-template-columns: repeat(2, minmax(0, 1fr));}}
@media (max-width: 560px){.grid{grid-template-columns: 1fr;}}
.list{margin:0;padding-left:16px;color:var(--muted);line-height:1.6}
hr.sep{border:none;border-top:1px solid rgba(163,177,198,.35);margin:18px 0}

/* —Ñ—É—Ç–µ—Ä */
.footer{
  padding:34px 0;
  color:var(--muted);
  border-top:1px solid rgba(163,177,198,.35);
  margin-top:34px;
}
.footer a{color:var(--muted)}
.footer a:hover{color:var(--text)}
.foot-grid{display:grid;grid-template-columns: 1.2fr .8fr;gap:16px}
@media (max-width: 820px){.foot-grid{grid-template-columns:1fr}}

/* badges */
.badge{
  display:inline-flex;gap:8px;align-items:center;
  font-size:12px;font-weight:900;
  padding:7px 12px;border-radius:999px;
  background: var(--surface);
  color: var(--text);
  border:1px solid rgba(255,255,255,.75);
  box-shadow: 10px 10px 22px rgba(163,177,198,.35), -10px -10px 22px rgba(255,255,255,.92);
}
.badge.purple{
  background: var(--accent-grad);
  color:#fff;
  border-color: rgba(30,120,255,.18);
}

/* FIX: —á—Ç–æ–±—ã Tilda –Ω–µ –ø–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–ª–∞ —Å—Å—ã–ª–∫–∏ */
#allrecords a,
#allrecords a:visited,
.t-records a,
.t-records a:visited{
  color: inherit !important;
  text-decoration: none !important;
}
</style> <script>
window.addEventListener('DOMContentLoaded', function () {

  /* 1) –ê–≤—Ç–æ-—Ñ–∏–∫—Å —Å—Å—ã–ª–æ–∫: /services.html -> /services */
  document.querySelectorAll('a[href]').forEach(function(a){
    let href = a.getAttribute('href');
    if(!href) return;

    // –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ —Å—Å—ã–ª–∫–∏
    if (
      href.startsWith('http') ||
      href.startsWith('mailto:') ||
      href.startsWith('tel:') ||
      href.startsWith('#')
    ) return;

    // –¥–µ–ª–∞–µ–º —Å—Å—ã–ª–∫—É –∞–±—Å–æ–ª—é—Ç–Ω–æ–π (—á—Ç–æ–±—ã "services.html" —Ç–æ–∂–µ –ø–æ–π–º–∞—Ç—å)
    if (!href.startsWith('/')) href = '/' + href;

    // —Ä–µ–∂–µ–º .html
    // –í–ê–ñ–ù–û: –ù–ï —Ä–µ–∂–µ–º —É —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –≤–∏–¥–∞ /pageXXXXXXXX.html –∏ —É /gallery.html,
    // –∏–Ω–∞—á–µ —Å—Å—ã–ª–∫–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –≤–µ—Å—Ç–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã (/pageXXXXXXXX –∏ /gallery).
    if (
      href.endsWith('.html') &&
      !/\/page\d+\.html$/i.test(href) &&
      href !== '/gallery.html'
    ) {
      href = href.slice(0, -5);
    }

    // index.html -> /
    if (href === '/index') href = '/';

    a.setAttribute('href', href);
  });

  /* 2) –ù–∞—Å—Ç—Ä–æ–π –∞–¥—Ä–µ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞—è–≤–∫–∏ (–µ—Å–ª–∏ —É —Ç–µ–±—è –Ω–µ /apply ‚Äî –ø–æ–º–µ–Ω—è–π) */
  const APPLY_PATH = '/apply';

  /* 3) –ü–æ–∏—Å–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π: –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ */
  const sform = document.querySelector('form[data-search]');
  if (sform) {
    sform.addEventListener('submit', function (e) {
      e.preventDefault();
      const input = sform.querySelector('input[name="q"]');
      const q = input ? input.value.trim() : '';
      if (!q) {
        alert('–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞');
        return;
      }
      // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
      if (typeof window.openSearchModal === 'function') {
        window.openSearchModal(q);
      } else {
        // Fallback: –µ—Å–ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
        location.href = APPLY_PATH + '?q=' + encodeURIComponent(q);
      }
    });
  }

  /* 4) –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º */
  const qs = new URLSearchParams(location.search);
  const setVal = (id, v) => { const el = document.getElementById(id); if(el && v) el.value = v; };
  setVal('req_text', qs.get('q'));
  setVal('category', qs.get('cat'));
  setVal('expert', qs.get('expert'));

  /* 5) –î–µ–º–æ-–æ—Ç–ø—Ä–∞–≤–∫–∞ (–ø–æ–∫–∞ –Ω–µ –ø–æ–¥–∫–ª—é—á–∏–ª —Ñ–æ—Ä–º—ã) */
  const form = document.querySelector('form[data-static-submit]');
  if (form) {
    form.addEventListener('submit', function (e) {
      e.preventDefault();
      alert('–î–µ–º–æ: —Ñ–æ—Ä–º–∞ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞. –ü–æ–¥–∫–ª—é—á–∏ –≤ Tilda –∫ –ø–æ—á—Ç–µ/CRM/Telegram.');
    });
  }

});
</script> <style>
.pick-grid{
  display:grid;
  grid-template-columns: repeat(6, minmax(0, 1fr));
  gap:12px;
  margin-top:12px;
}
@media (max-width: 980px){ .pick-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); } }
@media (max-width: 560px){ .pick-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }

.pick-btn{
  width:100%;
  border:1px solid rgba(255,255,255,.75);
  border-radius:18px;
  padding:14px 12px;
  background: var(--surface);
  color: var(--text);
  font-weight:900;
  cursor:pointer;
  box-shadow: 10px 10px 22px rgba(163,177,198,.45), -10px -10px 22px rgba(255,255,255,.92);
  transition: .15s transform ease, .15s box-shadow ease, .15s filter ease;
}
.pick-btn:hover{ transform: translateY(-1px); filter:saturate(1.05); }
.pick-btn:active{
  transform: translateY(0);
  box-shadow: inset 10px 10px 22px rgba(163,177,198,.45), inset -10px -10px 22px rgba(255,255,255,.92);
}
.pick-btn.active{
  background: var(--accent-grad);
  color:#fff;
  border-color: rgba(30,120,255,.18);
  box-shadow: 12px 12px 26px rgba(30,120,255,.25), -10px -10px 22px rgba(255,255,255,.75);
}
.pick-btn.ghost{ opacity:.85; }
</style> <script>
window.addEventListener('DOMContentLoaded', function () {

  function applyCat(cat){
    const buttons = document.querySelectorAll('.cat-picker [data-cat]');
    const cards = document.querySelectorAll('[data-expert-card]');

    buttons.forEach(function(b){
      b.classList.toggle('active', !!cat && b.dataset.cat === cat);
    });

    cards.forEach(function(c){
      const ok = !cat || c.dataset.cat === cat;
      c.style.display = ok ? '' : 'none';
    });

    // –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ URL ?cat=..., —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π
    const u = new URL(window.location.href);
    if(cat) u.searchParams.set('cat', cat);
    else u.searchParams.delete('cat');
    history.replaceState(null, '', u.toString());
  }

  // –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–∞–º
  document.querySelectorAll('.cat-picker [data-cat]').forEach(function(btn){
    btn.addEventListener('click', function(){
      applyCat(btn.dataset.cat || '');
    });
  });

  // –∞–≤—Ç–æ–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑ URL
  const qs = new URLSearchParams(location.search);
  applyCat(qs.get('cat') || '');

});
</script> <style>
/* 1) –í—Å–µ–≥–¥–∞ –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–∏–Ω–µ–π –∫–Ω–æ–ø–∫–µ –≤ —à–∞–ø–∫–µ */
#allrecords .nav .btn.primary,
#allrecords .nav .btn.primary *,
.t-records .nav .btn.primary,
.t-records .nav .btn.primary *{
  color:#fff !important;
}
</style> <style>
/* –ñ—ë—Å—Ç–∫–æ –¥–µ–ª–∞–µ–º –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–∏–Ω–µ–π –∫–Ω–æ–ø–∫–µ –≤ —à–∞–ø–∫–µ (–æ–±—Ö–æ–¥–∏—Ç —Ç–≤–æ–π #allrecords a {color:inherit!important}) */
#allrecords .nav .nav-cta a.ai-cta,
#allrecords .nav .nav-cta a.ai-cta:visited,
#allrecords .nav .nav-cta a.ai-cta *,
#allrecords .nav a.ai-cta,
#allrecords .nav a.ai-cta *{
  color:#fff !important;
  -webkit-text-fill-color:#fff !important;
}
</style> <script>
(function(){
  const ADD_PATH   = (window.AI_BIRZHA && window.AI_BIRZHA.ADD_PATH) ? window.AI_BIRZHA.ADD_PATH : "/add";
  const APPLY_PATH = (window.AI_BIRZHA && window.AI_BIRZHA.APPLY_PATH) ? window.AI_BIRZHA.APPLY_PATH : "/apply";

  function cleanHref(h){
    if(!h) return "";
    return String(h)
      .replace(location.origin, "")
      .replace(/\.html(?=($|\?|\#))/, "");
  }

  function findHeaderBtn(){
    const nav = document.querySelector(".nav") || document.querySelector("header");
    if(!nav) return null;

    const cta = nav.querySelector(".nav-cta");
    if(!cta) return null;
    
    // –ò—â–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –∫–Ω–æ–ø–∫—É (primary) –≤ .nav-cta - —ç—Ç–æ –Ω–∞—à–∞ –∫–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞/–∫–∞–±–∏–Ω–µ—Ç–∞
    const btn = cta.querySelector("a.btn.primary:last-of-type") || cta.querySelector("a:last-of-type");
    
    return btn || null;
  }

  function setBtn(btn, mode, isAuthenticated){
    // —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Å—Ç–∏–ª—å –∏ —Ç–µ–∫—Å—Ç
    btn.classList.add("ai-cta", "btn", "primary");
    btn.textContent = (mode === "cabinet") ? "–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" : "–í—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è";
    
    // –í–ê–ñ–ù–û: —É–±–∏—Ä–∞–µ–º href, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Å—Å—ã–ª–∫–µ
    btn.removeAttribute("href");
    btn.setAttribute("href", "javascript:void(0)");
    btn.style.cursor = "pointer";

    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –µ—Å–ª–∏ –±—ã–ª
    if(btn._aiClickHandler) {
      btn.removeEventListener("click", btn._aiClickHandler, true);
    }

    // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
    btn._aiClickHandler = function(e){
      e.preventDefault();
      e.stopPropagation();
      
      console.log('üîò –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É:', mode, 'Auth:', isAuthenticated);
      
      // –ï—Å–ª–∏ –ù–ï –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      if(!isAuthenticated){
        console.log('üîì –û—Ç–∫—Ä—ã–≤–∞—é –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
        if(typeof window.openAuthModal === 'function') {
          window.openAuthModal();
        } else {
          console.error('‚ùå –§—É–Ω–∫—Ü–∏—è openAuthModal –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
          // Fallback: —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth –µ—Å–ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
          const AUTH_PATH = (window.AI_BIRZHA && window.AI_BIRZHA.AUTH_PATH) ? window.AI_BIRZHA.AUTH_PATH : "/auth";
          if (window.navigateTo) {
            window.navigateTo(AUTH_PATH + "?redirect=" + encodeURIComponent(ADD_PATH));
          } else {
            location.href = AUTH_PATH + "?redirect=" + encodeURIComponent(ADD_PATH);
          }
        }
      } else {
        // –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí –∏–¥—ë–º –Ω–∞ /add
        console.log('üöÄ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞:', ADD_PATH);
        if (window.navigateTo) {
          window.navigateTo(ADD_PATH);
        } else {
          location.href = ADD_PATH;
        }
      }
    };
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å capture=true —á—Ç–æ–±—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å —Ä–∞–Ω—å—à–µ –≤—Å–µ—Ö
    btn.addEventListener("click", btn._aiClickHandler, true);
  }

  async function waitSupabase(){
    for(let i=0;i<120;i++){
      if(window.AI_BIRZHA && window.AI_BIRZHA.sb) return window.AI_BIRZHA.sb;
      await new Promise(r=>setTimeout(r,100));
    }
    return null;
  }

  async function init(){
    // –∂–¥—ë–º –ø–æ–∫–∞ —à–∞–ø–∫–∞ —Ä–µ–∞–ª—å–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    let btn = null;
    for(let i=0;i<120;i++){
      btn = findHeaderBtn();
      if(btn) break;
      await new Promise(r=>setTimeout(r,100));
    }
    if(!btn) return;
    
    // –ñ–¥—ë–º –ø–æ–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ
    for(let i=0;i<50;i++){
      if(typeof window.openAuthModal === 'function') break;
      await new Promise(r=>setTimeout(r,50));
    }

    // –¥–µ—Ñ–æ–ª—Ç (–Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
    setBtn(btn, "portfolio", false);

    // –µ—Å–ª–∏ –µ—Å—Ç—å supabase ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ–º, –µ—Å—Ç—å –ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∞
    const sb = await waitSupabase();
    if(!sb) return;

    const { data: authData } = await sb.auth.getUser();
    const user = authData?.user;
    
    // –ï—Å–ª–∏ –ù–ï –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º "portfolio" —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –Ω–∞ auth
    if(!user) return;

    // –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω: –ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∞
    const { data, error } = await sb.from("experts").select("id").eq("user_id", user.id).limit(1);
    if(!error && data && data.length > 0){
      setBtn(btn, "cabinet", true); // –µ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∞ ‚Üí –∫–∞–±–∏–Ω–µ—Ç
    } else {
      setBtn(btn, "portfolio", true); // –Ω–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ ‚Üí —Å–æ–∑–¥–∞—Ç—å
    }
  }

  if(document.readyState === "loading") document.addEventListener("DOMContentLoaded", init);
  else init();
})();
</script> <style>
/* –¢–µ–≥–∏-—á–∏–ø—Å—ã –ø–æ–¥ –ø–æ–ª–µ–º "–†–æ–ª—å" (—Ç–æ–ª—å–∫–æ –Ω–∞ /add) */
#roleChips{ margin-top:10px; display:flex; flex-wrap:wrap; gap:8px; }
#roleChips .tag{ cursor:pointer; user-select:none; }
#roleChips .tag:after{ content:" √ó"; opacity:.55; margin-left:4px; }
</style> <script>
(function(){
  function normTags(str){
    return String(str||"")
      .split(",")
      .map(s => s.trim())
      .filter(Boolean)
      .slice(0, 20);
  }
  function uniq(arr){
    const out=[], seen=new Set();
    for(const x of arr){
      const k = x.toLowerCase();
      if(!seen.has(k)){ seen.add(k); out.push(x); }
    }
    return out;
  }

  // 1) /add: –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫—É –≤ —á–∏–ø—Å—ã –ø–æ–¥ –∏–Ω–ø—É—Ç–æ–º
  function enhanceRoleInput(){
    if(!location.pathname.startsWith("/add")) return;

    const input = document.getElementById("f_role");
    if(!input || input.dataset.tagsEnhanced) return;
    input.dataset.tagsEnhanced = "1";

    const field = input.closest(".field") || input.parentElement;
    if(!field) return;

    const chips = document.createElement("div");
    chips.id = "roleChips";
    chips.className = "tagrow";
    field.appendChild(chips);

    function renderChips(){
      const tags = uniq(normTags(input.value));
      chips.innerHTML = tags.map(t => `<span class="tag" data-t="${t.replace(/"/g,"&quot;")}">${t}</span>`).join("");
    }

    function normalizeAndRender(){
      const tags = uniq(normTags(input.value));
      input.value = tags.join(", ");
      renderChips();
    }

    chips.addEventListener("click", (e)=>{
      const tagEl = e.target.closest(".tag");
      if(!tagEl) return;
      const t = (tagEl.getAttribute("data-t") || tagEl.textContent || "").trim();
      const tags = uniq(normTags(input.value)).filter(x => x.toLowerCase() !== t.toLowerCase());
      input.value = tags.join(", ");
      renderChips();
    });

    input.addEventListener("input", renderChips);
    input.addEventListener("blur", normalizeAndRender);

    normalizeAndRender();
  }

  // 2) –í –∫–∞—Ç–∞–ª–æ–≥–µ/–ø—Ä–æ—Ñ–∏–ª–µ: –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –µ—Å—Ç—å .tag —Å –∑–∞–ø—è—Ç—ã–º–∏ ‚Äî —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–ª–∞—à–∫–∏
  function splitCommaTagsEverywhere(root=document){
    const tags = root.querySelectorAll ? root.querySelectorAll(".tagrow .tag") : [];
    tags.forEach(tag=>{
      if(tag.closest && tag.closest("#roleChips")) return; // –Ω–µ —Ç—Ä–æ–≥–∞–µ–º —á–∏–ø—Å—ã –≤ –∫–∞–±–∏–Ω–µ—Ç–µ

      const txt = (tag.textContent || "").trim();
      if(!txt.includes(",")) return;

      const parts = uniq(normTags(txt));
      if(parts.length <= 1) return;

      const frag = document.createDocumentFragment();
      parts.forEach(p=>{
        const el = tag.cloneNode(false);
        el.className = tag.className;
        el.textContent = p;
        frag.appendChild(el);
      });
      tag.replaceWith(frag);
    });
  }

  function runAll(){
    enhanceRoleInput();
    splitCommaTagsEverywhere(document);
  }

  if(document.readyState === "loading") document.addEventListener("DOMContentLoaded", runAll);
  else runAll();

})();
</script> <style>
/* ===== FAST TAGS (–±–µ–∑ MutationObserver) ===== */
#roleChips{ margin-top:10px; display:flex; flex-wrap:wrap; gap:8px; }
#roleChips .tag{ cursor:pointer; user-select:none; }
#roleChips .tag:after{ content:" √ó"; opacity:.55; margin-left:4px; }

.ai-linkrow{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
.ai-linkrow .btn{white-space:nowrap}

/* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–∏–Ω–µ–π */
.btn.primary, .btn.primary *{ color:#fff !important; -webkit-text-fill-color:#fff !important; }
</style> <script>
(function(){
  /* ---------- utils ---------- */
  function normTags(str){
    return String(str||"")
      .split(",")
      .map(s=>s.trim())
      .filter(Boolean)
      .slice(0, 30);
  }
  function uniq(arr){
    const out=[], seen=new Set();
    for(const x of arr){
      const k=x.toLowerCase();
      if(!seen.has(k)){ seen.add(k); out.push(x); }
    }
    return out;
  }
  function splitCommaTagsOnce(){
    document.querySelectorAll(".tagrow .tag").forEach(tag=>{
      if(tag.closest && tag.closest("#roleChips")) return;
      const txt=(tag.textContent||"").trim();
      if(!txt.includes(",")) return;
      const parts=uniq(normTags(txt));
      if(parts.length<=1) return;

      const frag=document.createDocumentFragment();
      parts.forEach(p=>{
        const el=tag.cloneNode(false);
        el.className=tag.className;
        el.textContent=p;
        frag.appendChild(el);
      });
      tag.replaceWith(frag);
    });
  }

  function extractTgNick(v){
    v=String(v||"").trim();
    if(!v) return "";
    const m=v.match(/(?:t\.me|telegram\.me)\/([A-Za-z0-9_]{3,})/i);
    if(m && m[1]) return m[1];
    return v.replace(/^@+/,"").trim();
  }
  function tgLink(v){
    const nick=extractTgNick(v);
    return nick ? ("https://t.me/" + nick) : "";
  }
  function normalizeWebsite(v){
    v=String(v||"").trim();
    if(!v) return "";
    if(/^https?:\/\//i.test(v)) return v;
    return "https://" + v;
  }
  function normalizeInstagram(v){
    v=String(v||"").trim();
    if(!v) return "";
    if(/^https?:\/\//i.test(v)) return v;
    v=v.replace(/^@+/,"").trim();
    return v ? ("https://www.instagram.com/" + v + "/") : "";
  }

  async function waitSb(){
    for(let i=0;i<80;i++){
      if(window.AI_BIRZHA && window.AI_BIRZHA.sb) return window.AI_BIRZHA.sb;
      await new Promise(r=>setTimeout(r,120));
    }
    return null;
  }

  /* ---------- 1) /add: —á–∏–ø—Å—ã –ø–æ–¥ –ø–æ–ª–µ–º —Ç–µ–≥–æ–≤ ---------- */
  function enhanceRoleInput(){
    if(!location.pathname.startsWith("/add")) return;
    const input=document.getElementById("f_role");
    if(!input || input.dataset.tagsEnhanced) return;
    input.dataset.tagsEnhanced="1";

    const field=input.closest(".field") || input.parentElement;
    if(!field) return;

    const chips=document.createElement("div");
    chips.id="roleChips";
    chips.className="tagrow";
    field.appendChild(chips);

    function render(){
      const tags=uniq(normTags(input.value));
      chips.innerHTML=tags.map(t=>`<span class="tag" data-t="${t.replace(/"/g,"&quot;")}">${t}</span>`).join("");
    }
    function normalize(){
      const tags=uniq(normTags(input.value));
      input.value=tags.join(", ");
      render();
    }

    chips.addEventListener("click",(e)=>{
      const el=e.target.closest(".tag");
      if(!el) return;
      const t=(el.getAttribute("data-t")||el.textContent||"").trim();
      const tags=uniq(normTags(input.value)).filter(x=>x.toLowerCase()!==t.toLowerCase());
      input.value=tags.join(", ");
      render();
    });

    input.addEventListener("input", render);
    input.addEventListener("blur", normalize);

    normalize();
  }

  /* ---------- 2) –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ä—Ç–æ—á–∫–∏: –¥–æ—Ä–∏—Å–æ–≤–∞—Ç—å Instagram/–°–∞–π—Ç/–û–ø–∏—Å–∞–Ω–∏–µ ---------- */
  async function enhanceExpertPage(){
    const qs=new URLSearchParams(location.search);
    const id = qs.get("id") || qs.get("expert") || qs.get("expert_id");
    if(!id) return; // –Ω–µ—Ç id -> –Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ä—Ç–æ—á–∫–∏

    // –Ω–µ —Ç—Ä–æ–≥–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–ø–∏—Å–∫–∞ /experts
    if(location.pathname === "/experts") return;

    const sb=await waitSb();
    if(!sb) return;

    const { data: expert, error } = await sb
      .from("experts")
      .select("id, description, instagram, website, telegram")
      .eq("id", id)
      .single();

    if(error || !expert) return;

    // –ö—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å: –∏—â–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ"
    const msgBtn = Array.from(document.querySelectorAll("a.btn, button.btn"))
      .find(el => /–Ω–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ/i.test((el.textContent||"").trim()));

    let host = null;
    if(msgBtn && msgBtn.parentElement) host = msgBtn.parentElement;

    // –µ—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ ‚Äî –≤—Å—Ç–∞–≤–∏–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–π h-card
    if(!host){
      host = document.querySelector(".h-card") || document.querySelector(".container") || document.body;
    }

    // –ö–æ–Ω—Ç–∞–∫—Ç—ã (Instagram/–°–∞–π—Ç)
    const ig = normalizeInstagram(expert.instagram);
    const site = normalizeWebsite(expert.website);

    if((ig || site) && !document.getElementById("aiLinksRow")){
      const row = document.createElement("div");
      row.className="ai-linkrow";
      row.id="aiLinksRow";

      if(ig){
        const a=document.createElement("a");
        a.className="btn";
        a.href=ig; a.target="_blank"; a.rel="noopener";
        a.textContent="Instagram";
        row.appendChild(a);
      }
      if(site){
        const a=document.createElement("a");
        a.className="btn";
        a.href=site; a.target="_blank"; a.rel="noopener";
        a.textContent="–°–∞–π—Ç";
        row.appendChild(a);
      }

      // –≤—Å—Ç–∞–≤–ª—è–µ–º —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–∞–º–∏
      if(msgBtn && msgBtn.parentElement){
        msgBtn.parentElement.appendChild(row);
      }else{
        host.appendChild(row);
      }
    }

    // –ï—Å–ª–∏ —Ç–µ–ª–µ–≥–∞ –∫–Ω–æ–ø–∫–∞ –µ—Å—Ç—å, –Ω–æ —Å—Å—ã–ª–∫–∞ –ø—É—Å—Ç–∞—è ‚Äî –º–æ–∂–µ–º –ø–æ–ø—Ä–∞–≤–∏—Ç—å
    const tg = tgLink(expert.telegram);
    if(tg && msgBtn && msgBtn.tagName.toLowerCase()==="a"){
      msgBtn.href = tg;
      msgBtn.target = "_blank";
      msgBtn.rel = "noopener";
    }

    // –û–ø–∏—Å–∞–Ω–∏–µ (–µ—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ–≥–æ —Ä–µ–∞–ª—å–Ω–æ –Ω–µ—Ç)
    const desc = String(expert.description||"").trim();
    if(desc){
      const alreadyHas = document.body && (document.body.innerText || "").includes(desc.slice(0, Math.min(25, desc.length)));
      if(!alreadyHas && !document.getElementById("aiDescBlock")){
        const block = document.createElement("div");
        block.id="aiDescBlock";
        block.className="h-card";
        block.style.marginTop="14px";
        block.innerHTML = `
          <h2 class="section-title" style="margin:0 0 8px">–û–ø–∏—Å–∞–Ω–∏–µ</h2> <div class="section-sub" style="margin:0;white-space:pre-wrap">${desc.replace(/[&<>]/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[m]))}</div>
        `;
        (document.querySelector(".container") || host).appendChild(block);
      }
    }
  }

  /* ---------- run ---------- */
  function run(){
    enhanceRoleInput();

    // —Ä–∞–∑–±–∏–≤–∞–µ–º —Ç–µ–≥–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ (–±—ã—Å—Ç—Ä–æ, –±–µ–∑ observer)
    splitCommaTagsOnce();
    setTimeout(splitCommaTagsOnce, 400);
    setTimeout(splitCommaTagsOnce, 1400);

    enhanceExpertPage();
  }

  if(document.readyState==="loading") document.addEventListener("DOMContentLoaded", run);
  else run();
})();
</script> <style>
/* =========================
   AI-–ë–∏—Ä–∂–∞ ‚Ä¢ Lightbox + CARD thumbs
   ========================= */

/* 1) –ù–∞ CARD (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ä—Ç–æ—á–∫–∏): –ø—Ä–µ–≤—å—é –ë–ï–ó –ü–û–õ–ï–ô */
html[data-ai-page="card"] #allrecords .ab-gallery-item,
html[data-ai-page="card"] .t-records .ab-gallery-item{
  position: relative;
  overflow: hidden;
  border-radius: 18px;
  background: transparent !important;
}

/* –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–µ–≤—å—é –≤ –≥–∞–ª–µ—Ä–µ–µ –Ω–∞ CARD (–º–æ–∂–µ—à—å –º–µ–Ω—è—Ç—å) */
html[data-ai-page="card"] #allrecords .ab-gallery-item{ aspect-ratio: 16 / 10; }
html[data-ai-page="card"] .t-records .ab-gallery-item{ aspect-ratio: 16 / 10; }

html[data-ai-page="card"] #allrecords .ab-gallery-item img,
html[data-ai-page="card"] #allrecords .ab-gallery-item video,
html[data-ai-page="card"] .t-records .ab-gallery-item img,
html[data-ai-page="card"] .t-records .ab-gallery-item video{
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;      /* –í–û–¢ –≠–¢–û —É–±–∏—Ä–∞–µ—Ç –ø–æ–ª—è */
  background: transparent !important; /* –Ω–µ —Ä–∏—Å—É–µ–º —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω */
  display:block;
}

/* –ß—Ç–æ–±—ã –≤–∏–¥–µ–æ –≤ –ø—Ä–µ–≤—å—é –Ω–µ –º–µ—à–∞–ª–æ –∫–ª–∏–∫—É (–º—ã –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ª–∞–π—Ç–±–æ–∫—Å) */
html[data-ai-page="card"] .ab-gallery-item video{
  pointer-events: none;
}

/* 2) Lightbox */
.ab-lb{
  position: fixed; inset: 0;
  z-index: 999999;
  background: rgba(10,20,40,.62);
  backdrop-filter: blur(8px);
  display: none;
  align-items: center;
  justify-content: center;
  padding: 18px;
}
.ab-lb.open{ display:flex; }

.ab-lb__inner{
  width: min(1080px, 96vw);
  max-height: 92vh;
  border-radius: 22px;
  overflow: hidden;
  background: rgba(255,255,255,.9);
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
  position: relative;
}

.ab-lb__top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 10px 12px;
  background: rgba(255,255,255,.85);
  border-bottom: 1px solid rgba(0,0,0,.06);
}

.ab-lb__title{
  font-size: 14px;
  color: rgba(20,35,63,.8);
  font-weight: 700;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.ab-lb__close{
  border: none;
  border-radius: 14px;
  padding: 10px 12px;
  cursor: pointer;
  background: rgba(240,245,255,.9);
  box-shadow: inset 6px 6px 14px rgba(163,177,198,.25), inset -6px -6px 14px rgba(255,255,255,.9);
  font-weight: 900;
}

.ab-lb__stage{
  background: #0b0c10; /* —Ñ–æ–Ω –¥–ª—è full-view */
  display:flex;
  align-items:center;
  justify-content:center;
  width: 100%;
  height: calc(92vh - 52px);
  max-height: calc(92vh - 52px);
  position: relative;
}

.ab-lb__stage img,
.ab-lb__stage video{
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain; /* –í full-view –ù–ï —Ä–µ–∂–µ–º */
  background: #000;
}

.ab-lb__nav{
  position:absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  border: none;
  border-radius: 16px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,.88);
  box-shadow: 0 10px 30px rgba(0,0,0,.18);
  font-size: 20px;
  font-weight: 900;
  user-select:none;
}
.ab-lb__nav.prev{ left: 12px; }
.ab-lb__nav.next{ right: 12px; }

@media (max-width: 640px){
  .ab-lb__nav{ width: 40px; height: 40px; border-radius: 14px; }
  .ab-lb__stage{ height: calc(92vh - 52px); }
}
</style> <script>
(function(){
  /* -------------------------
     0) –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Å—Ç—Ä–∞–Ω–∏—Ü—ã
     ------------------------- */
  function detectPage(){
    const path = location.pathname.replace(/\/+$/,'');
    const qs = new URLSearchParams(location.search);

    // /add = –∫–∞–±–∏–Ω–µ—Ç/—Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (—Ç–∞–º –Ω–∞–º –ù–ï –Ω–∞–¥–æ cover)
    if(path === "/add") return "add";

    // CARD: —É —Ç–µ–±—è —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å /card –∏–ª–∏ /profile –∏ —Ç.–ø.
    // –û–ø—Ä–µ–¥–µ–ª–∏–º –ø–æ –Ω–∞–ª–∏—á–∏—é id –∏ —Å–ª–æ–≤–∞ "–ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    const hasId = qs.get("id") || qs.get("expert") || qs.get("expert_id");
    const hasCardTitle = Array.from(document.querySelectorAll("h1,h2,h3"))
      .some(h => /–∫–∞—Ä—Ç–æ—á–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è/i.test(h.textContent||""));
    if(hasId && hasCardTitle) return "card";

    return "other";
  }

  function setPageDataset(){
    document.documentElement.dataset.aiPage = detectPage();
  }

  /* -------------------------
     1) –ù–∞—Ö–æ–¥–∏–º –≥–∞–ª–µ—Ä–µ—é –Ω–∞ CARD
     ------------------------- */
  function getGalleryRoot(){
    // –µ—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π id ‚Äî –ø–æ–¥—Ö–≤–∞—Ç–∏–º
    const byId = document.getElementById("galleryGrid") || document.getElementById("expertGallery") || document.getElementById("mediaGallery");
    if(byId) return byId;

    // –∏—â–µ–º —Å–µ–∫—Ü–∏—é, –≥–¥–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ "–ì–∞–ª–µ—Ä–µ—è"
    const headings = Array.from(document.querySelectorAll("h2,h3"));
    const h = headings.find(x => (x.textContent||"").trim().toLowerCase() === "–≥–∞–ª–µ—Ä–µ—è");
    if(h){
      // –æ–±—ã—á–Ω–æ –≥–∞–ª–µ—Ä–µ—è —Ä—è–¥–æ–º/–Ω–∏–∂–µ
      return h.closest(".h-card") || h.parentElement;
    }

    return null;
  }

  /* -------------------------
     2) –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ items
     ------------------------- */
  function buildItems(root){
    // –±–µ—Ä—ë–º —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞
    const nodes = Array.from(root.querySelectorAll("img, video"));
    const items = [];

    nodes.forEach((el) => {
      const wrap = el.closest(".ab-gallery-item") || el.parentElement;

      // –ø–æ–º–µ—á–∞–µ–º –æ–±—ë—Ä—Ç–∫—É –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç –≥–∞–ª–µ—Ä–µ–∏ (–¥–ª—è CSS cover –Ω–∞ CARD)
      if(wrap && !wrap.classList.contains("ab-gallery-item")){
        wrap.classList.add("ab-gallery-item");
        wrap.style.cursor = "pointer";
      }

      if(el.tagName.toLowerCase() === "img"){
        const src = el.currentSrc || el.src;
        if(src) items.push({ type:"img", src });
      } else {
        const src = el.currentSrc || el.src || (el.querySelector("source") ? el.querySelector("source").src : "");
        if(src) items.push({ type:"video", src });
      }
    });

    return items;
  }

  /* -------------------------
     3) Lightbox UI
     ------------------------- */
  function ensureLightbox(){
    let lb = document.getElementById("abLightbox");
    if(lb) return lb;

    lb = document.createElement("div");
    lb.id = "abLightbox";
    lb.className = "ab-lb";
    lb.innerHTML = `
      <div class="ab-lb__inner" role="dialog" aria-modal="true"> <div class="ab-lb__top"> <div class="ab-lb__title" id="abLbTitle">–ü—Ä–æ—Å–º–æ—Ç—Ä</div> <button class="ab-lb__close" type="button" id="abLbClose">‚úï</button> </div> <div class="ab-lb__stage" id="abLbStage"> <button class="ab-lb__nav prev" type="button" id="abLbPrev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ">‚Äπ</button> <button class="ab-lb__nav next" type="button" id="abLbNext" aria-label="–°–ª–µ–¥—É—é—â–µ–µ">‚Ä∫</button> </div> </div>
    `;
    document.body.appendChild(lb);
    return lb;
  }

  function openLb(state, index){
    const lb = ensureLightbox();
    const stage = lb.querySelector("#abLbStage");
    const title = lb.querySelector("#abLbTitle");
    const items = state.items;

    state.index = (index + items.length) % items.length;

    // —á–∏—Å—Ç–∏–º —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∫—Ä–æ–º–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
    Array.from(stage.children).forEach(ch=>{
      if(ch.id === "abLbPrev" || ch.id === "abLbNext") return;
      ch.remove();
    });

    const cur = items[state.index];
    title.textContent = (state.index + 1) + " / " + items.length;

    if(cur.type === "img"){
      const img = document.createElement("img");
      img.src = cur.src;
      img.alt = "";
      stage.appendChild(img);
    } else {
      const v = document.createElement("video");
      v.src = cur.src;
      v.controls = true;
      v.autoplay = true;
      v.playsInline = true;
      v.preload = "metadata";
      stage.appendChild(v);
    }

    lb.classList.add("open");
    document.body.style.overflow = "hidden";
  }

  function closeLb(){
    const lb = document.getElementById("abLightbox");
    if(!lb) return;
    lb.classList.remove("open");
    document.body.style.overflow = "";
  }

  /* -------------------------
     4) Swipe –Ω–∞ –º–æ–±–∏–ª–µ
     ------------------------- */
  function enableSwipe(stage, onPrev, onNext){
    let x0 = null, y0 = null;
    stage.addEventListener("touchstart", (e)=>{
      const t = e.touches[0];
      x0 = t.clientX; y0 = t.clientY;
    }, {passive:true});

    stage.addEventListener("touchend", (e)=>{
      if(x0===null) return;
      const t = e.changedTouches[0];
      const dx = t.clientX - x0;
      const dy = t.clientY - y0;
      x0 = null; y0 = null;

      if(Math.abs(dx) > 40 && Math.abs(dx) > Math.abs(dy)){
        if(dx > 0) onPrev();
        else onNext();
      }
    }, {passive:true});
  }

  /* -------------------------
     5) Init
     ------------------------- */
  function init(){
    setPageDataset();
    if(document.documentElement.dataset.aiPage !== "card") return;

    const root = getGalleryRoot();
    if(!root) return;

    const items = buildItems(root);
    if(items.length === 0) return;

    const state = { items, index: 0 };

    // –∫–ª–∏–∫–∏ –ø–æ –ª—é–±–æ–º—É img/video –≤ –≥–∞–ª–µ—Ä–µ–µ ‚Üí –æ—Ç–∫—Ä—ã—Ç—å
    root.addEventListener("click", (e)=>{
      const el = e.target.closest("img, video");
      if(!el) return;

      const src = el.currentSrc || el.src || (el.querySelector && el.querySelector("source") ? el.querySelector("source").src : "");
      const idx = state.items.findIndex(x => x.src === src);
      openLb(state, idx >= 0 ? idx : 0);
    });

    // –Ω–∞–≤–∏–≥–∞—Ü–∏—è/–∑–∞–∫—Ä—ã—Ç–∏–µ
    const lb = ensureLightbox();
    const prev = lb.querySelector("#abLbPrev");
    const next = lb.querySelector("#abLbNext");
    const close = lb.querySelector("#abLbClose");
    const stage = lb.querySelector("#abLbStage");

    function goPrev(){ openLb(state, state.index - 1); }
    function goNext(){ openLb(state, state.index + 1); }

    prev.onclick = goPrev;
    next.onclick = goNext;
    close.onclick = closeLb;

    // –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É –∑–∞–∫—Ä—ã–≤–∞–µ—Ç
    lb.addEventListener("click", (e)=>{
      if(e.target === lb) closeLb();
    });

    // –∫–ª–∞–≤–∏—à–∏
    document.addEventListener("keydown", (e)=>{
      const opened = lb.classList.contains("open");
      if(!opened) return;
      if(e.key === "Escape") closeLb();
      if(e.key === "ArrowLeft") goPrev();
      if(e.key === "ArrowRight") goNext();
    });

    enableSwipe(stage, goPrev, goNext);
  }

  if(document.readyState === "loading") document.addEventListener("DOMContentLoaded", init);
  else init();

  // –ü–æ–¥—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞: Tilda –∏–Ω–æ–≥–¥–∞ –¥–æ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –±–ª–æ–∫–∏ –ø–æ–∑–∂–µ
  setTimeout(()=>{ try{ init(); }catch(e){} }, 600);
  setTimeout(()=>{ try{ init(); }catch(e){} }, 1600);
})();
</script> <style>
  /* —Å–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É "–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏" */
  .ai-hide-what-inside{display:none!important;}

  /* –µ—Å–ª–∏ –≤ hero-grid –æ—Å—Ç–∞–ª–∞—Å—å –æ–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ ‚Äî –¥–µ–ª–∞–µ–º 1 –∫–æ–ª–æ–Ω–∫—É */
  .hero-grid.ai-hero-onecol{grid-template-columns:1fr!important;}
</style> <script>
(function () {
  function norm(s){ return (s||'').replace(/\s+/g,' ').trim().toLowerCase(); }

  function hideFrom(el){
    const card =
      el.closest('.h-card') ||
      el.closest('.t-rec') ||
      el.closest('#allrecords > div') ||
      el.parentElement;

    if(card){
      card.classList.add('ai-hide-what-inside');

      // –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–∞–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –≤ hero-grid ‚Äî —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –ª–µ–≤—É—é
      const grid = card.closest('.hero-grid');
      if(grid){
        const visible = Array.from(grid.querySelectorAll('.h-card'))
          .filter(c => !c.classList.contains('ai-hide-what-inside'));
        if(visible.length <= 1) grid.classList.add('ai-hero-onecol');
      }
    }
  }

  function run(){
    // 1) –∏—â–µ–º –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É "–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏"
    document.querySelectorAll('h1,h2,h3').forEach(function(h){
      if(norm(h.textContent) === '—á—Ç–æ –≤–Ω—É—Ç—Ä–∏') hideFrom(h);
    });

    // 2) fallback: –∏—â–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –±–µ–π–¥–∂–µ–º "MVP" –∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏"
    document.querySelectorAll('.badge').forEach(function(b){
      if(norm(b.textContent) === 'mvp'){
        const card = b.closest('.h-card');
        if(!card) return;
        const h = card.querySelector('h1,h2,h3');
        if(h && norm(h.textContent) === '—á—Ç–æ –≤–Ω—É—Ç—Ä–∏'){
          card.classList.add('ai-hide-what-inside');
          const grid = card.closest('.hero-grid');
          if(grid) grid.classList.add('ai-hero-onecol');
        }
      }
    });
  }

  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', run);
  } else {
    run();
  }
})();
</script> <script>
(function () {
  if (window.__AI_ALBUMS_FORCE_V1__) return;
  window.__AI_ALBUMS_FORCE_V1__ = true;

  function onReady(fn){
    if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', fn);
    else fn();
  }

  function loadScript(src){
    return new Promise((resolve, reject)=>{
      const s = document.createElement('script');
      s.src = src; s.async = true;
      s.onload = resolve; s.onerror = reject;
      document.head.appendChild(s);
    });
  }

  async function getSB(){
    // 1) –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å ‚Äî –æ–∫
    if (window.AI_BIRZHA && window.AI_BIRZHA.sb) return window.AI_BIRZHA.sb;

    // 2) –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥
    if (!window.AI_BIRZHA || !window.AI_BIRZHA.SUPABASE_URL || !window.AI_BIRZHA.SUPABASE_ANON_KEY) {
      console.warn('[ALBUMS] –ù–µ—Ç window.AI_BIRZHA.SUPABASE_URL / ANON_KEY');
      return null;
    }

    // 3) –µ—Å–ª–∏ supabase-js –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω ‚Äî –ø–æ–¥–∫–ª—é—á–∞–µ–º
    if (!window.supabase) {
      await loadScript('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2');
    }

    // 4) —Å–æ–∑–¥–∞—ë–º –∫–ª–∏–µ–Ω—Ç
    window.AI_BIRZHA.sb = window.supabase.createClient(
      window.AI_BIRZHA.SUPABASE_URL,
      window.AI_BIRZHA.SUPABASE_ANON_KEY
    );
    return window.AI_BIRZHA.sb;
  }

  function mountAlbumsUI(){
    // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¢–û–õ–¨–ö–û –Ω–∞ /add
    if (!location.pathname.includes('/add')) return;
    if (document.getElementById('aiAlbumsAdd')) return;

    const host =
      document.querySelector('.h-card') ||
      document.querySelector('#allrecords') ||
      document.querySelector('.t-records') ||
      document.body;

    const box = document.createElement('div');
    box.className = 'h-card';
    box.id = 'aiAlbumsAdd';
    box.style.marginTop = '16px';
    box.innerHTML = `
      <div class="h-eyebrow">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</div> <h2 class="section-title" style="margin:8px 0 0">–ê–ª—å–±–æ–º—ã</h2> <p class="section-sub" style="margin:8px 0 0">–°–æ–∑–¥–∞–π –∞–ª—å–±–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä ‚Äú–†–∏–ª—Å—ã‚Äù) –∏ –¥–æ–±–∞–≤–ª—è–π –º–µ–¥–∏–∞ –≤ –Ω–µ–≥–æ.</p> <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:end;margin-top:12px"> <div style="flex:1 1 240px"> <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞</label> <input id="aiAlbumTitle" type="text" placeholder="–†–∏–ª—Å—ã" /> </div> <button class="btn primary" type="button" id="aiAlbumCreate">–°–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º</button> </div> <div class="small" id="aiAlbumsStatus" style="margin-top:10px"></div>
    `;

    // –≤—Å—Ç–∞–≤–∏–º –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ .h-card (–∞ –Ω–µ ‚Äú–≤–Ω—É—Ç—Ä—å‚Äù), —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –±—ã–ª–æ –≤–∏–¥–Ω–æ
    if (host.classList && host.classList.contains('h-card')) host.insertAdjacentElement('afterend', box);
    else host.appendChild(box);
  }

  onReady(async function(){
    // 1) –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—Å—Ç–∞–≤–ª—è–µ–º UI (–∫–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è —Å—Ä–∞–∑—É)
    mountAlbumsUI();

    // 2) –ø–æ–¥–∫–ª—é—á–∞–µ–º Supabase –∏ –¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É —Ä–∞–±–æ—á–µ–π
    const sb = await getSB();
    const status = document.getElementById('aiAlbumsStatus');
    const btn = document.getElementById('aiAlbumCreate');
    const title = document.getElementById('aiAlbumTitle');

    if (!status || !btn || !title) return;

    if (!sb) {
      status.textContent = '–û—à–∏–±–∫–∞: Supabase –Ω–µ –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤ HEAD –µ—Å—Ç—å window.AI_BIRZHA (URL + KEY).';
      return;
    }

    const { data: authData } = await sb.auth.getUser();
    const user = authData?.user;
    if (!user) {
      status.textContent = '–í–æ–π–¥–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–ª—å–±–æ–º—ã.';
      btn.disabled = true;
      return;
    }

    // –Ω–∞–π–¥—ë–º expert_id
    const ex = await sb.from('experts').select('id').eq('user_id', user.id).limit(1);
    const expertId = ex?.data?.[0]?.id;
    if (!expertId) {
      status.textContent = '–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏ ‚Äú–°–æ—Ö—Ä–∞–Ω–∏—Ç—å‚Äù –∫–∞—Ä—Ç–æ—á–∫—É. –ü–æ—Ç–æ–º —Å–æ–∑–¥–∞–≤–∞–π –∞–ª—å–±–æ–º—ã.';
      btn.disabled = true;
      return;
    }

    btn.addEventListener('click', async function(){
      const t = (title.value || '').trim();
      if(!t) return alert('–ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞.');

      status.textContent = '–°–æ–∑–¥–∞—é –∞–ª—å–±–æ–º...';
      const r = await sb.from('expert_albums').insert({
        expert_id: expertId,
        user_id: user.id,
        title: t
      }).select('id,title');

      if (r.error){
        status.textContent = '–û—à–∏–±–∫–∞: ' + r.error.message;
        return;
      }

      status.textContent = '–ì–æ—Ç–æ–≤–æ ‚úÖ –ê–ª—å–±–æ–º —Å–æ–∑–¥–∞–Ω: ' + (r.data?.[0]?.title || t);
      title.value = '';
    });
  });

})();
</script> <!-- nominify end --><!-- nominify begin --><!-- –ì–ª–∞–≤–Ω–∞—è: –∫–∞—Ä—Ç–∏–Ω–∫–∏ –¥–ª—è 5 –Ω–∏—à + –∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ –≤–µ–¥—ë—Ç –Ω–∞ /experts?cat=... --> <style>
/* –¥–æ–±–∞–≤–ª—è–µ–º ‚Äú–æ–±–ª–æ–∂–∫—É‚Äù —Å–≤–µ—Ä—Ö—É –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */
.ab-cat-card{ position: relative; cursor: pointer; }
.ab-cat-cover{
  width: 100%;
  height: 150px;
  border-radius: 18px;
  margin: 0 0 14px 0;
  overflow: hidden;
  background: linear-gradient(145deg, #F8FBFF, #E7EDF7);
  box-shadow: inset 10px 10px 22px rgba(163,177,198,.25), inset -10px -10px 22px rgba(255,255,255,.9);
}
.ab-cat-cover img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
}

/* —á—Ç–æ–±—ã –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ ‚Äú–û—Ç–∫—Ä—ã—Ç—å‚Äù —Ç–æ–∂–µ —à—ë–ª –∫—É–¥–∞ –Ω–∞–¥–æ */
.ab-cat-card .btn{ pointer-events: none; } /* –∫–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω–æ, –Ω–æ –∫–ª–∏–∫–∞–µ–º –ø–æ –≤—Å–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ */
</style> <script>
(function(){
  const EXPERTS_URL = "experts";

  // –°—é–¥–∞ –≤—Å—Ç–∞–≤—å —Å–≤–æ–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–º–æ–∂–Ω–æ –ª—é–±—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ jpg/png/webp).
  // –ë—ã—Å—Ç—Ä–æ: –∑–∞–≥—Ä—É–∑–∏ 5 –∫–∞—Ä—Ç–∏–Ω–æ–∫ –≤ –¢–∏–ª—å–¥—É ‚Üí –≤–æ–∑—å–º–∏ –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ ‚Üí –≤—Å—Ç–∞–≤—å —Å—é–¥–∞.
  const covers = {
    video: "images/tild3461-6261-4432-b063-383561353962__ceda1882f970bba49495.jpg",
    design: "images/tild3964-3236-4436-b733-363764633439__dd0ad1aacd5b284e1a69.jpg",
    bots: "images/tild3237-3261-4866-a433-643535663365__405911a662d11b8d03f2.jpg",
    marketplaces: "images/tild3439-6435-4063-b363-383237343262__e9e46a9dd81658d7d489.jpg",
    sites: "images/tild6663-6437-4234-b333-353232303235__55b45166ba55ba9e717d.jpg",
  };
  
  // SEO: alt-—Ç–µ–∫—Å—Ç—ã –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  const altTexts = {
    video: "AI-–≤–∏–¥–µ–æ: —Ä–∏–ª—Å—ã –∏ —Ä–µ–∫–ª–∞–º–∞ –Ω–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏",
    design: "AI-–¥–∏–∑–∞–π–Ω: –∫—Ä–µ–∞—Ç–∏–≤—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∞ Midjourney",
    bots: "AI-–±–æ—Ç—ã: Telegram –∏ ChatGPT –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è",
    marketplaces: "–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è Wildberries –∏ Ozon",
    sites: "AI-—Å–∞–π—Ç—ã: –ª–µ–Ω–¥–∏–Ω–≥–∏ –Ω–∞ Tilda –∏ Framer",
  };

  // –ö–∞—Ä—Ç–∞ ‚Äú–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏‚Äù -> cat
  function detectCatByTitle(title){
    const t = (title || "").toLowerCase();
    if(t.includes("ai-–≤–∏–¥–µ–æ") || t.includes("ai-video") || t.includes("–≤–∏–¥–µ–æ")) return "video";
    if(t.includes("ai-–¥–∏–∑–∞–π–Ω") || t.includes("design") || t.includes("–¥–∏–∑–∞–π–Ω")) return "design";
    if(t.includes("ai-–±–æ—Ç") || t.includes("–±–æ—Ç") || t.includes("automation") || t.includes("–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞")) return "bots";
    if(t.includes("wb") || t.includes("ozon") || t.includes("–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å")) return "marketplaces";
    if(t.includes("ai-—Å–∞–π—Ç") || t.includes("—Å–∞–π—Ç") || t.includes("–ª–µ–Ω–¥–∏–Ω–≥") || t.includes("tilda") || t.includes("webflow") || t.includes("framer")) return "sites";
    return null;
  }

  function makeCover(url, altText){
    const cover = document.createElement("div");
    cover.className = "ab-cat-cover";
    const img = document.createElement("img");
    img.src = url;
    img.alt = altText || "AI-—É—Å–ª—É–≥–∏";
    img.loading = "lazy";
    cover.appendChild(img);
    return cover;
  }

  function init(){
    // –∏—â–µ–º –±–ª–æ–∫ ‚Äú5 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π‚Äù
    const h = Array.from(document.querySelectorAll("h1,h2,h3,div,span"))
      .find(el => el.childElementCount === 0 && /5\s+–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω/i.test((el.textContent||"").trim()));
    if(!h) return;

    // –±–µ—Ä—ë–º —Å–µ–∫—Ü–∏—é –∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–Ω—É—Ç—Ä–∏ (—Ç–≤–æ–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–º–µ—é—Ç –∫–ª–∞—Å—Å .card)
    const section = h.closest("section") || h.closest(".t-rec") || document.body;
    const cards = Array.from(section.querySelectorAll(".card"));

    cards.forEach(card=>{
      const titleEl = card.querySelector("h3") || card.querySelector("strong") || card;
      const title = titleEl ? titleEl.textContent : "";
      const cat = detectCatByTitle(title);

      if(!cat) return;

      // –¥–µ–ª–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π
      card.classList.add("ab-cat-card");
      card.addEventListener("click", function(e){
        e.preventDefault();
        window.location.href = `${EXPERTS_URL}?cat=${encodeURIComponent(cat)}`;
      });

      // –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É —Å–≤–µ—Ä—Ö—É, –µ—Å–ª–∏ –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞
      if(!card.querySelector(".ab-cat-cover")){
        const url = covers[cat];
        const alt = altTexts[cat];
        if(url){
          card.insertBefore(makeCover(url, alt), card.firstChild);
        }
      }
    });
  }

  document.addEventListener("DOMContentLoaded", init);
  setTimeout(init, 700);   // –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –¢–∏–ª—å–¥–∞ –¥–æ—Ä–∏—Å—É–µ—Ç –ø–æ–∑–∂–µ
  setTimeout(init, 1700);
})();
</script> <!-- nominify end --><script type="text/javascript">window.dataLayer=window.dataLayer||[];</script> <script type="text/javascript">(function() {if((/bot|google|yandex|baidu|bing|msn|duckduckbot|teoma|slurp|crawler|spider|robot|crawling|facebook/i.test(navigator.userAgent))===false&&typeof(sessionStorage)!='undefined'&&sessionStorage.getItem('visited')!=='y'&&document.visibilityState){var style=document.createElement('style');style.type='text/css';style.innerHTML='@media screen and (min-width: 980px) {.t-records {opacity: 0;}.t-records_animated {-webkit-transition: opacity ease-in-out .2s;-moz-transition: opacity ease-in-out .2s;-o-transition: opacity ease-in-out .2s;transition: opacity ease-in-out .2s;}.t-records.t-records_visible {opacity: 1;}}';document.getElementsByTagName('head')[0].appendChild(style);function t_setvisRecs(){var alr=document.querySelectorAll('.t-records');Array.prototype.forEach.call(alr,function(el) {el.classList.add("t-records_animated");});setTimeout(function() {Array.prototype.forEach.call(alr,function(el) {el.classList.add("t-records_visible");});sessionStorage.setItem("visited","y");},400);}
document.addEventListener('DOMContentLoaded',t_setvisRecs);}})();</script><link rel="stylesheet" href="/css/mobile-menu.css?v=20260104c1">
</head> <body class="t-body" style="margin:0;"> <!--allrecords--> <div id="allrecords" data-tilda-export="yes" class="t-records" data-hook="blocks-collection-content-node" data-tilda-project-id="13172919" data-tilda-page-id="103804766" data-tilda-formskey="77f9e6caf19eb935e0f8ff1513172919" data-tilda-cookie="no" data-tilda-lazy="yes" data-tilda-root-zone="com" data-tilda-project-headcode="yes" data-tilda-page-headcode="yes" data-tilda-project-country="RU"> <div id="rec1689407041" class="r t-rec" style=" " data-animationappear="off" data-record-type="131"> <!-- T123 --> <div class="t123"> <div class="t-container_100 "> <div class="t-width t-width_100 "> <!-- nominify begin --> <!doctype html> <html lang="ru"> <head> <meta charset="utf-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <title>AI-–ë–∏—Ä–∂–∞ ‚Äî –∫–∞—Ç–∞–ª–æ–≥ AI-—É—Å–ª—É–≥ (MVP)</title> <meta name="description" content="–ö–∞—Ç–∞–ª–æ–≥ AI-—É—Å–ª—É–≥: –≤–∏–¥–µ–æ, –¥–∏–∑–∞–π–Ω, –±–æ—Ç—ã, WB/Ozon, —Å–∞–π—Ç—ã."/> <link rel="stylesheet" href="/assets/styles.css"/> </head> <body> <header class="nav"> <div class="container nav-inner"> <a class="brand" href="/index.html"> <span class="logo" aria-hidden="true"></span> <span>–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –ò–ò —É—Å–ª—É–≥</span> </a> <nav class="nav-links" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è"> <a href="/page103811056.html">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</a> <a href="/projects.html">–ü—Ä–æ–µ–∫—Ç—ã</a> <a href="/gallery.html">–ì–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç</a> <a href="/page103811576.html">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</a> <a href="/page103811816.html">FAQ</a> </nav> <div class="nav-cta"> <a class="btn" href="/add.html">–†–∞–∑–º–µ—Å—Ç–∏—Ç—å —É—Å–ª—É–≥—É</a> <a class="btn primary" href="/apply.html">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</a> </div> </div> </header> <main> <section class="hero"> <div class="container hero-grid"> <div class="h-card"> <div class="h-eyebrow">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å (–±–µ–∑ –æ–ø–ª–∞—Ç)</div> <h1 class="h-title">–ö–∞—Ç–∞–ª–æ–≥ –ò–ò —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞</h1> <p class="h-sub">–°–º–æ—Ç—Ä–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏ –∫–µ–π—Å—ã, –ø–∏—à–∏ –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º</p> <div class="searchbox"> <form data-search style="display:flex;gap:10px;flex:1;flex-wrap:wrap"> <input name="q" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 10 reels –¥–ª—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏–∏ / –∫–∞—Ä—Ç–æ—á–∫–∞ WB / –±–æ—Ç –≤ Telegram" /> <button class="btn green" type="submit">–ü–æ–¥–æ–±—Ä–∞—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</button> </form> </div> <div class="h-actions"> <a class="btn primary" href="/services.html">–í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</a> <a class="btn" href="/apply.html">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</a> </div> <div class="note">–ë–µ–∑ –æ–ø–ª–∞—Ç –Ω–∞ —Å–∞–π—Ç–µ. –ó–∞—è–≤–∫–∞ —É—Ö–æ–¥–∏—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –∏ –≤ –∞–¥–º–∏–Ω–∫—É.</div> </div> <div class="h-card"> <div class="badge purple">MVP</div> <h2 style="margin:12px 0 8px;font-weight:900">–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏</h2> <ul class="list"> <li>5 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π —É—Å–ª—É–≥</li> <li>–ö–∞—Ç–∞–ª–æ–≥ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π + –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ</li> <li>–ö–µ–π—Å—ã –∏ –ø–∞–∫–µ—Ç—ã —Ä–∞–±–æ—Ç</li> <li>–ï–¥–∏–Ω–∞—è –∑–∞—è–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞</li> </ul> <div class="kpis"> <div class="kpi"><div class="n">5</div><div class="t">–∫–∞—Ç–µ–≥–æ—Ä–∏–π</div></div> <div class="kpi"><div class="n">‚àû</div><div class="t">–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π (–¥–æ–±–∞–≤–∏—à—å)</div></div> <div class="kpi"><div class="n">1</div><div class="t">—Ñ–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏</div></div> </div> </div> </div> </section> <section class="section"> <div class="container"> <h2 class="section-title">5 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π</h2> <p class="section-sub">–í—ã–±–∏—Ä–∞–π –∫–∞—Ç–µ–≥–æ—Ä–∏—é ‚Äî —Å–º–æ—Ç—Ä–∏ –ø–∞–∫–µ—Ç—ã, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏ –æ—Å—Ç–∞–≤–ª—è–π –∑–∞—è–≤–∫—É.</p> <div class="grid"> <a class="card" href="/video.html"> <h3>AI-–í–∏–¥–µ–æ</h3> <p>Reels, —Ä–µ–∫–ª–∞–º–∞, –º–æ–Ω—Ç–∞–∂, —Å—É–±—Ç–∏—Ç—Ä—ã, –æ–∑–≤—É—á–∫–∞. –°–µ—Ä–∏—è–º–∏ –ø–æ–¥ –ø–ª–æ—â–∞–¥–∫–∏.</p> <div class="tagrow"><span class="tag">Reels/Ads</span><span class="tag">–°—É–±—Ç–∏—Ç—Ä—ã</span><span class="tag">–û–∑–≤—É—á–∫–∞</span></div> <div style="margin-top:12px"><span class="btn">–û—Ç–∫—Ä—ã—Ç—å</span></div> </a> <a class="card" href="/design.html"> <h3>AI-–î–∏–∑–∞–π–Ω</h3> <p>–ö—Ä–µ–∞—Ç–∏–≤—ã –¥–ª—è —Ä–µ–∫–ª–∞–º—ã, —Å–æ—Ü—Å–µ—Ç–∏, –±—ã—Å—Ç—Ä—ã–π –±—Ä–µ–Ω–¥–∏–Ω–≥, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏.</p> <div class="tagrow"><span class="tag">A/B</span><span class="tag">Figma/PSD</span><span class="tag">–°–µ—Ä–∏–∏</span></div> <div style="margin-top:12px"><span class="btn">–û—Ç–∫—Ä—ã—Ç—å</span></div> </a> <a class="card" href="/bots.html"> <h3>AI-–ë–æ—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</h3> <p>Telegram/—Å–∞–π—Ç. –ó–∞—è–≤–∫–∏, –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ CRM/Sheets.</p> <div class="tagrow"><span class="tag">Telegram</span><span class="tag">CRM</span><span class="tag">Sheets</span></div> <div style="margin-top:12px"><span class="btn">–û—Ç–∫—Ä—ã—Ç—å</span></div> </a> <a class="card" href="/marketplaces.html"> <h3>WB/Ozon —É–ø–∞–∫–æ–≤–∫–∞</h3> <p>–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞, SEO-—Ç–µ–∫—Å—Ç—ã, A/B —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ–æ–±–ª–æ–∂–∫–∏.</p> <div class="tagrow"><span class="tag">WB</span><span class="tag">Ozon</span><span class="tag">–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞</span></div> <div style="margin-top:12px"><span class="btn">–û—Ç–∫—Ä—ã—Ç—å</span></div> </a> <a class="card" href="/sites.html"> <h3>AI-–°–∞–π—Ç—ã/–ª–µ–Ω–¥–∏–Ω–≥–∏</h3> <p>Tilda/Framer/Webflow. –°—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ç–µ–∫—Å—Ç—ã, –¥–∏–∑–∞–π–Ω, —Ñ–æ—Ä–º—ã.</p> <div class="tagrow"><span class="tag">No-code</span><span class="tag">–¢–µ–∫—Å—Ç—ã</span><span class="tag">–§–æ—Ä–º—ã</span></div> <div style="margin-top:12px"><span class="btn">–û—Ç–∫—Ä—ã—Ç—å</span></div> </a> </div> </div> </section> <section class="section"> <div class="container"> <h2 class="section-title">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2> <p class="section-sub">–í –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –∏ –±—ã—Å—Ç—Ä–æ: –∫–∞—Ç–∞–ª–æ–≥ ‚Üí –∑–∞—è–≤–∫–∞ ‚Üí —Å–≤—è–∑—å –Ω–∞–ø—Ä—è–º—É—é.</p> <div class="grid"> <div class="card"> <h3>1) –í—ã–±–∏—Ä–∞–µ—à—å —É—Å–ª—É–≥—É</h3> <p>–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏–ª–∏ –ø–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É. –ë–µ–∑ –ª–∏—à–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.</p> </div> <div class="card"> <h3>2) –°–º–æ—Ç—Ä–∏—à—å –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ</h3> <p>–ö–µ–π—Å—ã, –ø—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç, –ø–∞–∫–µ—Ç—ã –∏ —Å—Ä–æ–∫–∏ ‚Äî —Å—Ä–∞–∑—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</p> </div> <div class="card"> <h3>3) –û—Å—Ç–∞–≤–ª—è–µ—à—å –∑–∞—è–≤–∫—É</h3> <p>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è, —É—Ç–æ—á–Ω—è–µ—Ç –¢–ó –∏ —Å—Ä–æ–∫–∏. –û–ø–ª–∞—Ç–∞ ‚Äî –Ω–∞–ø—Ä—è–º—É—é.</p> </div> </div> </div> </section> <section class="section"> <div class="container"> <div class="h-card" style="display:flex;flex-wrap:wrap;gap:14px;align-items:center;justify-content:space-between"> <div style="max-width:720px"> <h2 class="section-title" style="margin:0 0 6px">–û—Å—Ç–∞–≤—å –∑–∞—è–≤–∫—É ‚Äî –ø–æ–¥–±–µ—Ä—ë–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</h2> <p class="section-sub" style="margin:0">–û–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è.</p> </div> <div style="display:flex;gap:10px;flex-wrap:wrap"> <a class="btn primary" href="/apply.html">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</a> <a class="btn" href="/experts.html">–°–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</a> </div> </div> </div> </section> </main> <script>
window.addEventListener('DOMContentLoaded', async function () {
  const sb = window.AI_BIRZHA.sb;
  const msg = document.getElementById('authMsg');
  const state = document.getElementById('authState');

  // ========== –û–ë–†–ê–ë–û–¢–ö–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò –ò–ó EMAIL ==========
  const u = new URL(location.href);
  const code = u.searchParams.get('code');
  const token_hash = u.searchParams.get('token_hash');
  const type = u.searchParams.get('type');
  const hasAccessTokenInHash = (location.hash || '').includes('access_token=');

  // –ï—Å–ª–∏ –µ—Å—Ç—å auth-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
  if (code || token_hash || hasAccessTokenInHash) {
    try {
      // 1) PKCE flow (OAuth —Å code)
      if (code) {
        await sb.auth.exchangeCodeForSession(location.href);
      }
      // 2) Magiclink flow (token_hash + type)
      else if (token_hash && type) {
        await sb.auth.verifyOtp({ type, token_hash });
      }
      // 3) Implicit flow (—Ç–æ–∫–µ–Ω—ã –≤ hash)
      else if (hasAccessTokenInHash) {
        if (sb.auth.getSessionFromUrl) {
          await sb.auth.getSessionFromUrl({ storeSession: true });
        } else {
          // –ó–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç: –ø–∞—Ä—Å–∏–º hash –≤—Ä—É—á–Ω—É—é
          const hash = new URLSearchParams((location.hash || '').replace(/^#/, ''));
          const access_token = hash.get('access_token');
          const refresh_token = hash.get('refresh_token');
          if (access_token && refresh_token) {
            await sb.auth.setSession({ access_token, refresh_token });
          }
        }
      }

      // –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–º
      const redirect = u.searchParams.get('redirect') || window.AI_BIRZHA.ADD_PATH;
      
      // –ß–∏—Å—Ç–∏–º URL –æ—Ç auth-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
      if (code) u.searchParams.delete('code');
      if (token_hash) u.searchParams.delete('token_hash');
      if (type) u.searchParams.delete('type');
      u.searchParams.delete('redirect');
      
      // –†–µ–¥–∏—Ä–µ–∫—Ç–∏–º –Ω–∞ —Ü–µ–ª–µ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
      console.log('‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞:', redirect);
      location.href = redirect;
      return;
    }
    catch(e) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', e);
      if (msg) msg.textContent = '–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ' + (e?.message || e);
    }
  }
  // ========== –ö–û–ù–ï–¶ –û–ë–†–ê–ë–û–¢–ö–ò –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ==========

  async function renderState(){
    const { data } = await sb.auth.getSession();
    const email = data?.session?.user?.email;
    state.textContent = email ? ("–í—ã –≤–æ—à–ª–∏ –∫–∞–∫: " + email) : "–í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã.";
    
    // –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, —Å–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞ (–≤ –º–æ–¥–∞–ª–∫–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–ø.–∫–Ω–æ–ø–∫–∏)
    const authForm = document.getElementById('authForm');
    if (email && authForm) {
      authForm.style.display = 'none';
    } else if (authForm) {
      authForm.style.display = 'block';
    }
  }

  document.getElementById('authForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    console.log('üîê –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
    console.log('üîê msg —ç–ª–µ–º–µ–Ω—Ç:', msg);
    console.log('üîê sb –∫–ª–∏–µ–Ω—Ç:', sb);
    
    msg.textContent = "–í—Ö–æ–∂—É...";
    const email = document.getElementById('authEmail').value.trim();
    const password = document.getElementById('authPassword').value;
    console.log('üîê Email:', email, '–ü–∞—Ä–æ–ª—å –¥–ª–∏–Ω–∞:', password.length);

    if (!sb) {
      console.error('‚ùå Supabase –∫–ª–∏–µ–Ω—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!');
      msg.textContent = "–û—à–∏–±–∫–∞: Supabase –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω";
      return;
    }

    console.log('üîê –í—ã–∑—ã–≤–∞—é sb.auth.signInWithPassword...');
    try {
      const { data, error } = await sb.auth.signInWithPassword({
        email,
        password
      });

      console.log('üîê –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Ö–æ–¥–∞:', { error, data });
      
      if (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
        msg.textContent = "–û—à–∏–±–∫–∞: " + error.message;
        msg.style.color = "red";
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
        if (error.message.includes("Invalid")) {
          msg.textContent += " (–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å)";
        }
      } else {
        console.log('‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω!');
        msg.textContent = "‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç...";
        msg.style.color = "green";
        
        console.log('‚è∞ –ó–∞–ø—É—Å–∫–∞—é —Ç–∞–π–º–µ—Ä –Ω–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç (800–º—Å)...');
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
        setTimeout(() => {
          console.log('‚è∞ –¢–∞–π–º–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–ª!');
          if (window.closeAuthModal) {
            console.log('üîí –ó–∞–∫—Ä—ã–≤–∞—é –º–æ–¥–∞–ª–∫—É...');
            window.closeAuthModal();
          }
          
          console.log('üöÄ –í–´–ü–û–õ–ù–Ø–Æ –ü–ï–†–ï–•–û–î –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç');
          
          // –ò—Å–ø–æ–ª—å–∑—É–µ–º navigateTo –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä–æ—É—Ç–µ—Ä–æ–º
          if (typeof window.navigateTo === 'function') {
            console.log('üöÄ –ò—Å–ø–æ–ª—å–∑—É–µ–º navigateTo("/add")');
            window.navigateTo(window.AI_BIRZHA.ADD_PATH || '/add');
          } else {
            console.log('üöÄ navigateTo –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥');
            window.location.href = window.location.origin + '/add';
          }
          
          console.log('üöÄ –ö–æ–º–∞–Ω–¥–∞ –Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞');
        }, 800);
      }
    } catch(err) {
      console.error('üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ:', err);
      msg.textContent = "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: " + err.message;
      msg.style.color = "red";
    }
  });

  // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  const registerBtn = document.getElementById('registerBtn');
  if(registerBtn){
    registerBtn.addEventListener('click', async () => {
      const email = document.getElementById('authEmail')?.value?.trim() || "";
      const password = document.getElementById('authPassword')?.value || "";

      msg.style.color = "";

      if(!email){
        msg.textContent = "–í–≤–µ–¥–∏—Ç–µ email.";
        msg.style.color = "red";
        return;
      }
      if(!password || password.length < 6){
        msg.textContent = "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤.";
        msg.style.color = "red";
        return;
      }

      msg.textContent = "–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é...";

      const { data, error } = await sb.auth.signUp({
        email,
        password
      });

      if(error){
        msg.textContent = "–û—à–∏–±–∫–∞: " + error.message;
        msg.style.color = "red";
        return;
      }

      const hasSession = !!data?.session;
      if(hasSession){
        msg.textContent = "‚úÖ –ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç...";
        msg.style.color = "green";
        
        console.log('üîê –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞, –Ω–∞—á–∏–Ω–∞—é —Ä–µ–¥–∏—Ä–µ–∫—Ç...');
        
        setTimeout(() => {
          if (window.closeAuthModal) window.closeAuthModal();
          
          console.log('üöÄ –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç');
          
          // –ò—Å–ø–æ–ª—å–∑—É–µ–º navigateTo –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä–æ—É—Ç–µ—Ä–æ–º
          if (typeof window.navigateTo === 'function') {
            window.navigateTo(window.AI_BIRZHA.ADD_PATH || '/add');
          } else {
            window.location.href = window.location.origin + '/add';
          }
        }, 800);
      } else {
        msg.textContent = "‚úÖ –ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω. –ü—Ä–æ–≤–µ—Ä—å –ø–æ—á—Ç—É –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email, –∑–∞—Ç–µ–º –≤–æ–π–¥–∏—Ç–µ.";
        msg.style.color = "green";
      }

      await renderState();
    });
  }

  // –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å
  const forgotPasswordLink = document.getElementById('forgotPasswordLink');
  if(forgotPasswordLink){
    forgotPasswordLink.addEventListener('click', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('authEmail')?.value?.trim() || "";
      
      if(!email){
        msg.textContent = "–í–≤–µ–¥–∏ email –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è.";
        msg.style.color = "red";
        return;
      }

      msg.style.color = "";
      msg.textContent = "–û—Ç–ø—Ä–∞–≤–ª—è—é —Å—Å—ã–ª–∫—É –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è...";

      const redirectTo = (window.AI_BIRZHA && window.AI_BIRZHA.PUBLIC_ORIGIN) 
        ? window.AI_BIRZHA.PUBLIC_ORIGIN + '/auth'
        : window.location.origin + '/auth';

      const { error } = await sb.auth.resetPasswordForEmail(email, {
        redirectTo: redirectTo
      });

      if(error){
        console.error('–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è:', error);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –æ—à–∏–±–∫–∏
        if(error.message && error.message.includes('Email rate limit exceeded')){
          msg.textContent = "‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫. –ü–æ–ø—Ä–æ–±—É–π —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.";
        } else if(error.message && error.message.includes('recovery email')){
          msg.textContent = "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ email —É–∫–∞–∑–∞–Ω –≤–µ—Ä–Ω–æ, –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∞–π—Ç–∞.";
        } else {
          msg.textContent = "–û—à–∏–±–∫–∞: " + error.message;
        }
        msg.style.color = "red";
        return;
      }

      msg.textContent = "‚úÖ –ü–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å –ø–æ—á—Ç—É (–≤–∫–ª—é—á–∞—è –ø–∞–ø–∫—É –°–ø–∞–º) –∏ –ø–µ—Ä–µ–π–¥–∏ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è.";
      msg.style.color = "green";
    });
  }

  await renderState();
});
</script> <footer class="footer"> <div class="container foot-grid"> <div> <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px"> <span class="logo" style="width:28px;height:28px;border-radius:10px"></span> <strong>AI-–ë–∏—Ä–∂–∞ (–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π MVP)</strong> </div> <div>–ö–∞—Ç–∞–ª–æ–≥ AI-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤. –ë–µ–∑ –æ–ø–ª–∞—Ç –Ω–∞ —Å–∞–π—Ç–µ. –î–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ –Ω–∞–ø—Ä—è–º—É—é.</div> <div class="small" style="margin-top:10px">¬© 2025</div> </div> <div style="display:grid;gap:8px;justify-items:start"> <a href="/privacy.html">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a> <a href="/terms.html">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a> <a href="/apply.html">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</a> </div> </div> </footer>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
<div id="authModal" class="auth-modal" style="display:none;">
  <div class="auth-modal-overlay"></div>
  <div class="auth-modal-content">
    <button class="auth-modal-close" id="closeAuthModal">&times;</button>
    <div class="h-card"> 
      <div class="h-eyebrow">–ê–∫–∫–∞—É–Ω—Ç</div> 
      <h1 class="h-title" style="font-size:34px">–í—Ö–æ–¥ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1> 
      <p class="h-sub">–í–≤–µ–¥–∏ email –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞.</p> 
      <form class="form" id="authForm"> 
        <div class="field"> 
          <label>Email</label> 
          <input id="authEmail" type="email" placeholder="you@mail.com" required> 
        </div> 
        <div class="field"> 
          <label>–ü–∞—Ä–æ–ª—å</label> 
          <input id="authPassword" type="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required> 
        </div> 
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn primary" type="submit">–í–æ–π—Ç–∏</button> 
          <button class="btn" id="registerBtn" type="button">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </div>
        <div style="margin-top:8px">
          <a href="#" id="forgotPasswordLink" style="font-size:13px;color:var(--muted);text-decoration:underline;cursor:pointer">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
        </div>
        <div class="small" style="margin-top:8px;opacity:.8">–ü–∞—Ä–æ–ª—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤.</div>
        <div class="small" id="authMsg"></div> 
      </form> 
      <hr class="sep"> 
      <div class="small" id="authState"></div> 
    </div>
  </div>
</div>
<!-- /–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->

<style>
/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
.auth-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.auth-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(19, 35, 63, 0.75);
  backdrop-filter: blur(8px);
  animation: fadeIn 0.3s ease;
}

.auth-modal-content {
  position: relative;
  z-index: 1;
  max-width: 500px;
  width: 100%;
  animation: slideUp 0.3s ease;
}

.auth-modal-close {
  position: absolute;
  top: -10px;
  right: -10px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--accent-grad);
  color: white;
  border: none;
  font-size: 28px;
  line-height: 1;
  cursor: pointer;
  box-shadow: 8px 8px 18px rgba(163,177,198,.45), -8px -8px 18px rgba(255,255,255,.85);
  transition: transform 0.2s ease;
  z-index: 2;
}

.auth-modal-close:hover {
  transform: scale(1.1) rotate(90deg);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
</style>

<script>
// –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
(function() {
  const modal = document.getElementById('authModal');
  const closeBtn = document.getElementById('closeAuthModal');
  const overlay = modal ? modal.querySelector('.auth-modal-overlay') : null;

  // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è
  window.openAuthModal = function() {
    if (modal) {
      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }
  };

  // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è
  window.closeAuthModal = function() {
    if (modal) {
      modal.style.display = 'none';
      document.body.style.overflow = '';
    }
  };

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É
  if (closeBtn) {
    closeBtn.addEventListener('click', window.closeAuthModal);
  }

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
  if (overlay) {
    overlay.addEventListener('click', window.closeAuthModal);
  }

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && modal && modal.style.display === 'flex') {
      window.closeAuthModal();
    }
  });
})();
</script>

<!--/allrecords--> <!-- Tilda copyright. Don't remove this line --><div class="t-tildalabel " id="tildacopy" data-tilda-sign="13172919#103804766"><a href="https://tilda.cc/" class="t-tildalabel__link"><div class="t-tildalabel__wrapper"><div class="t-tildalabel__txtleft">Made on </div><div class="t-tildalabel__wrapimg"><img src="images/tildacopy.png" class="t-tildalabel__img" fetchpriority="low" alt=""></div><div class="t-tildalabel__txtright">Tilda</div></div></a></div> <!-- Stat --> <script type="text/javascript">if(!window.mainTracker) {window.mainTracker='tilda';}
window.tildastatcookie='no';setTimeout(function(){(function(d,w,k,o,g) {var n=d.getElementsByTagName(o)[0],s=d.createElement(o),f=function(){n.parentNode.insertBefore(s,n);};s.type="text/javascript";s.async=true;s.key=k;s.id="tildastatscript";s.src=g;if(w.opera=="[object Opera]") {d.addEventListener("DOMContentLoaded",f,false);} else {f();}})(document,window,'b3e5db9cfc6c4460a026f51ee207b27b','script','js/tilda-stat-1.0.min.js');},2000);</script>
<script id="ai-remove-tilda">
(function(){
  function rm(){
    try{
      var el = document.getElementById("tildacopy");
      if(el) el.remove();
      document.querySelectorAll(".t-tildalabel").forEach(function(x){
        try{ x.remove(); }catch(e){}
      });
    }catch(e){}
  }
  try{
    var mo = new MutationObserver(function(){ rm(); });
    mo.observe(document.documentElement, { childList:true, subtree:true });
  }catch(e){}
  rm();
  document.addEventListener("DOMContentLoaded", rm);
  window.addEventListener("load", rm);
  setTimeout(rm, 50);
  setTimeout(rm, 250);
})();
</script>

<!-- –†–æ—É—Ç–µ—Ä –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ -->
<script>
(function() {
  // –ú–∞–ø–ø–∏–Ω–≥ –ø—É—Ç–µ–π –Ω–∞ —Ñ–∞–π–ª—ã
  const routes = {
    '/': 'index.html',
    '/services': 'page103809416.html',
    '/experts': 'page103811056.html',
    '/cases': 'page103811306.html',
    '/how': 'page103811576.html',
    '/faq': 'page103811816.html',
    '/gallery': 'gallery.html',
    '/projects': 'projects.html',
    '/client-cabinet': 'client-cabinet.html',
    '/create-project': 'create-project.html',
    '/project-detail': 'project-detail.html',
    '/apply': 'apply.html',
    '/add': 'add.html',
    '/auth': 'auth.html',
    '/privacy': 'page103812116.html',
    '/terms': 'page103812316.html',
    '/card': 'page104196026.html',
    '/expert-template': 'page103813286.html',
    '/case-template': 'page103813646.html'
  };
  
  // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
  const categoryRoutes = {
    '/video': 'video',
    '/bots': 'bots',
    '/design': 'design',
    '/marketplaces': 'marketplaces',
    '/sites': 'sites'
  };
  
  // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–æ—É—Ç–∏–Ω–≥–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
  window.navigateTo = function(href) {
    if (!href) return;
    if (href.startsWith('/') && !href.startsWith('//')) {
      const path = href.split('?')[0].split('#')[0].replace(/\/$/, '') || '/';
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —ç—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è?
      if (categoryRoutes[path]) {
        window.location.href = 'page103811056.html?cat=' + categoryRoutes[path];
        return;
      }
      
      const file = routes[path];
      if (file) {
        const query = href.includes('?') ? href.substring(href.indexOf('?')) : '';
        const hash = href.includes('#') ? href.substring(href.indexOf('#')) : '';
        window.location.href = file + query + hash;
      } else {
        window.location.href = href;
      }
    } else {
      window.location.href = href;
    }
  };

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞
  function handleLinkClick(e) {
    try{
      // e.target –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ Element (–Ω–∞–ø—Ä–∏–º–µ—Ä, Text node) ‚Äî –¥–µ–ª–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ
      const t = (e.target && e.target.nodeType === 1) ? e.target : (e.target && e.target.parentElement);
      const link = (t && t.closest) ? t.closest('a') : null;
      if (!link) return;

      // –í–ê–ñ–ù–û: –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —á—Ç–æ–±—ã –µ—ë –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ä–∞–±–æ—Ç–∞–ª –ø–µ—Ä–≤—ã–º
      if (link.classList.contains('ai-cta')) return;

      const href = link.getAttribute('href');
      if (!href) return;

      // –ù–ï –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –ø—Ä—è–º—ã–µ .html —Å—Å—ã–ª–∫–∏ ‚Äî –ø—É—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏—Ö —Å–∞–º
      // (–∏–Ω–∞—á–µ –∏–Ω–æ–≥–¥–∞ –ª–æ–º–∞–µ—Ç—Å—è –∫–ª–∏–∫ –Ω–∞ –ø—É–Ω–∫—Ç–∞—Ö –º–µ–Ω—é —Ç–∏–ø–∞ /page103811056.html)
      if (href.endsWith('.html')) return;

      // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç–∞—Ç–∏–∫—É
      if (href.startsWith('/assets/') || href.startsWith('/js/') || href.startsWith('/css/') || href.startsWith('/images/')) return;

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —ç—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Å—ã–ª–∫–∞?
      if (href.startsWith('/') && !href.startsWith('//')) {
        e.preventDefault();
        e.stopPropagation();
        window.navigateTo(href);
      }
    }catch(err){
      // –Ω–µ –¥–∞—ë–º –æ—à–∏–±–∫–∞–º —Ä–æ—É—Ç–µ—Ä–∞ –ª–æ–º–∞—Ç—å –∫–ª–∏–∫–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º
      return;
    }
  }

  // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –≤—Å–µ –∫–ª–∏–∫–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º
  document.addEventListener('click', handleLinkClick, true);
  
  console.log('‚úÖ –†–æ—É—Ç–µ—Ä –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω');
})();
</script>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ -->
<div id="searchModal" class="search-modal" style="display:none;">
  <div class="search-modal-overlay"></div>
  <div class="search-modal-content">
    <button class="search-modal-close" id="closeSearchModal">&times;</button>
    <div class="h-card">
      <div class="h-eyebrow">üîç –£–º–Ω—ã–π –ø–æ–∏—Å–∫</div>
      <h2 class="h-title" style="font-size:28px" id="searchModalTitle">–ò—â–µ–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π...</h2>
      <p class="h-sub" id="searchModalQuery"></p>
      
      <!-- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ -->
      <div id="searchLoading" style="text-align:center;padding:40px 0;">
        <div class="search-spinner"></div>
        <p style="margin-top:16px;color:var(--muted)">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö...</p>
      </div>
      
      <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
      <div id="searchResults" style="display:none;"></div>
      
      <!-- –ü—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
      <div id="searchEmpty" style="display:none;text-align:center;padding:40px 0;">
        <div style="font-size:48px;margin-bottom:16px;">ü§∑</div>
        <h3 style="margin:0 0 8px;font-weight:700;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
        <p class="section-sub">–ü–æ–ø—Ä–æ–±—É–π –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏ –≤—Å–µ—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</p>
        <a href="/experts" class="btn primary" style="margin-top:16px;">–í—Å–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</a>
      </div>
    </div>
  </div>
</div>

<style>
/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∏—Å–∫–∞ */
.search-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 40px 20px;
  overflow-y: auto;
}

.search-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(19, 35, 63, 0.8);
  backdrop-filter: blur(10px);
  animation: fadeIn 0.3s ease;
}

.search-modal-content {
  position: relative;
  z-index: 1;
  max-width: 800px;
  width: 100%;
  animation: slideUp 0.3s ease;
}

.search-modal-close {
  position: absolute;
  top: -10px;
  right: -10px;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: var(--accent-grad);
  color: white;
  border: none;
  font-size: 28px;
  line-height: 1;
  cursor: pointer;
  box-shadow: 8px 8px 18px rgba(163,177,198,.45), -8px -8px 18px rgba(255,255,255,.85);
  transition: transform 0.2s ease;
  z-index: 2;
}

.search-modal-close:hover {
  transform: scale(1.1) rotate(90deg);
}

/* –°–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ */
.search-spinner {
  width: 48px;
  height: 48px;
  border: 4px solid rgba(30,120,255,.15);
  border-top-color: var(--accent1);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–∏—Å–∫–∞ */
.search-result-card {
  background: linear-gradient(145deg, #F8FBFF, #E7EDF7);
  border: 1px solid rgba(255,255,255,.65);
  border-radius: 18px;
  padding: 16px;
  margin-bottom: 14px;
  box-shadow: 10px 10px 22px rgba(163,177,198,.35), -10px -10px 22px rgba(255,255,255,.9);
  transition: .25s all ease;
  cursor: pointer;
}

.search-result-card:hover:not(.expanded) {
  transform: translateY(-2px);
  box-shadow: 14px 14px 28px rgba(163,177,198,.40), -14px -14px 28px rgba(255,255,255,.94);
}

/* –†–∞—Å–∫—Ä—ã—Ç–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
.search-result-card.expanded {
  cursor: default;
  border: 2px solid var(--accent1);
  box-shadow: 0 8px 32px rgba(30,120,255,.18);
}

.search-result-card .expand-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 13px;
  color: #fff;
  font-weight: 700;
  margin-top: 12px;
  padding: 10px 20px;
  background: var(--accent-grad);
  border-radius: 10px;
  cursor: pointer;
  transition: all .2s ease;
  box-shadow: 0 4px 12px rgba(30,120,255,.25);
}

.search-result-card .expand-toggle:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(30,120,255,.35);
}

.search-result-card .expand-toggle::after {
  content: '‚ñº';
  font-size: 11px;
  transition: transform .2s;
}

.search-result-card.expanded .expand-toggle {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.search-result-card.expanded .expand-toggle::after {
  transform: rotate(180deg);
}

/* –°–∫—Ä—ã—Ç—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç */
.search-result-details {
  display: none;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid rgba(30,120,255,.12);
  animation: slideDown .3s ease;
}

.search-result-card.expanded .search-result-details {
  display: block;
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ */
.search-detail-description {
  font-size: 14px;
  line-height: 1.6;
  color: var(--text);
  margin-bottom: 16px;
}

/* –ì–∞–ª–µ—Ä–µ—è –≤ —Ä–∞—Å–∫—Ä—ã—Ç–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ */
.search-detail-gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
  margin-bottom: 16px;
}

.search-detail-gallery-item {
  aspect-ratio: 1;
  border-radius: 12px;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(30,120,255,.08), rgba(0,183,255,.06));
  cursor: pointer;
  transition: transform .2s;
}

.search-detail-gallery-item:hover {
  transform: scale(1.03);
}

.search-detail-gallery-item img,
.search-detail-gallery-item video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* –ê–ª—å–±–æ–º—ã */
.search-detail-albums {
  margin-bottom: 16px;
}

.search-detail-albums-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--muted);
  margin-bottom: 8px;
}

.search-detail-album {
  display: inline-block;
  padding: 6px 12px;
  margin: 0 6px 6px 0;
  background: rgba(30,120,255,.08);
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  color: var(--accent1);
}

/* –ò–Ω—Ñ–æ-–±–ª–æ–∫–∏ */
.search-detail-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 16px;
}

.search-detail-meta-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--muted);
}

.search-detail-meta-item strong {
  color: var(--text);
}

/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */
.search-detail-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  padding-top: 12px;
  border-top: 1px solid rgba(30,120,255,.08);
}

.search-detail-actions .btn {
  padding: 12px 20px;
  font-size: 14px;
}

/* –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π */
.search-detail-loading {
  text-align: center;
  padding: 20px;
  color: var(--muted);
}

.search-detail-loading .mini-spinner {
  width: 24px;
  height: 24px;
  border: 3px solid rgba(30,120,255,.15);
  border-top-color: var(--accent1);
  border-radius: 50%;
  animation: spin .8s linear infinite;
  margin: 0 auto 8px;
}

/* –°–≤–µ—Ä–Ω—É—Ç—å –∫–Ω–æ–ø–∫–∞ */
.search-collapse-btn {
  display: block;
  width: 100%;
  text-align: center;
  padding: 10px;
  margin-top: 12px;
  font-size: 13px;
  font-weight: 600;
  color: var(--muted);
  cursor: pointer;
  border-radius: 8px;
  transition: background .15s;
}

.search-collapse-btn:hover {
  background: rgba(30,120,255,.06);
  color: var(--accent1);
}

.search-result-header {
  display: flex;
  align-items: flex-start;
  gap: 14px;
}

.search-result-cover {
  width: 100px;
  height: 70px;
  border-radius: 12px;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(30,120,255,.12), rgba(0,183,255,.10));
  flex-shrink: 0;
}

.search-result-cover img,
.search-result-cover video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.search-result-cover .placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  font-size: 24px;
}

.search-result-info {
  flex: 1;
  min-width: 0;
}

.search-result-name {
  font-weight: 900;
  font-size: 17px;
  margin: 0 0 4px;
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.search-result-category {
  font-size: 12px;
  color: var(--muted);
  font-weight: 600;
}

.search-result-relevance {
  font-size: 12px;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 8px;
  background: var(--accent-grad);
  color: #fff;
}

.search-result-short {
  color: var(--muted);
  font-size: 14px;
  line-height: 1.4;
  margin: 6px 0;
}

.search-result-matches {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 10px;
}

.search-match-tag {
  font-size: 11px;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(30,120,255,.12);
  color: var(--accent1);
  font-weight: 600;
}

.search-result-actions {
  display: flex;
  gap: 10px;
  margin-top: 12px;
  flex-wrap: wrap;
}

.search-result-actions .btn {
  padding: 8px 14px;
  font-size: 13px;
}

@media (max-width: 600px) {
  .search-result-header {
    flex-direction: column;
  }
  .search-result-cover {
    width: 100%;
    height: 120px;
  }
  .search-modal {
    padding: 20px 12px;
  }
}
</style>

<script>
// –£–º–Ω—ã–π –ò–ò-–ø–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
(function() {
  const BUCKET = "experts-media";
  const CARD_PATH = "/card";
  
  const CAT_LABELS = {
    video: "AI-–í–∏–¥–µ–æ",
    design: "AI-–î–∏–∑–∞–π–Ω",
    bots: "AI-–ë–æ—Ç—ã",
    marketplaces: "WB/Ozon",
    sites: "AI-–°–∞–π—Ç—ã"
  };
  
  // DOM —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  const modal = document.getElementById('searchModal');
  const closeBtn = document.getElementById('closeSearchModal');
  const overlay = modal ? modal.querySelector('.search-modal-overlay') : null;
  const titleEl = document.getElementById('searchModalTitle');
  const queryEl = document.getElementById('searchModalQuery');
  const loadingEl = document.getElementById('searchLoading');
  const resultsEl = document.getElementById('searchResults');
  const emptyEl = document.getElementById('searchEmpty');
  
  // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  function openSearchModal(query) {
    if (!modal) return;
    
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
    
    titleEl.textContent = '–ò—â–µ–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π...';
    queryEl.textContent = '–ó–∞–ø—Ä–æ—Å: ¬´' + query + '¬ª';
    
    loadingEl.style.display = '';
    resultsEl.style.display = 'none';
    emptyEl.style.display = 'none';
    resultsEl.innerHTML = '';
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–∏—Å–∫
    performSearch(query);
  }
  
  // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  function closeSearchModal() {
    if (!modal) return;
    modal.style.display = 'none';
    document.body.style.overflow = '';
  }
  
  // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è
  window.openSearchModal = openSearchModal;
  window.closeSearchModal = closeSearchModal;
  
  // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏
  window.toggleExpertCard = async function(cardEl) {
    if (!cardEl) return;
    
    const isExpanded = cardEl.classList.contains('expanded');
    
    if (isExpanded) {
      // –°–≤–æ—Ä–∞—á–∏–≤–∞–µ–º
      cardEl.classList.remove('expanded');
      return;
    }
    
    // –°–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
    document.querySelectorAll('.search-result-card.expanded').forEach(c => {
      c.classList.remove('expanded');
    });
    
    // –†–∞—Å–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é
    cardEl.classList.add('expanded');
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–µ—Ç–∞–ª–∏ –µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
    const detailsEl = cardEl.querySelector('.search-result-details');
    if (detailsEl && detailsEl.dataset.loaded === 'false') {
      await loadExpertDetails(cardEl);
    }
    
    // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä–æ–ª–ª–∏–º –∫ –∫–∞—Ä—Ç–æ—á–∫–µ
    setTimeout(() => {
      cardEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }, 100);
  };
  
  // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
  async function loadExpertDetails(cardEl) {
    const expertId = cardEl.dataset.expertId;
    const detailsEl = cardEl.querySelector('.search-result-details');
    const actionsEl = cardEl.querySelector('.search-result-actions');
    
    if (!expertId || !detailsEl) return;
    
    const sb = await waitSbForSearch();
    if (!sb) {
      detailsEl.innerHTML = '<div class="search-detail-loading">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
      return;
    }
    
    try {
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è, –∞–ª—å–±–æ–º—ã –∏ –º–µ–¥–∏–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
      const [expertRes, albumsRes, mediaRes] = await Promise.all([
        sb.from('experts').select('*').eq('id', expertId).single(),
        sb.from('expert_albums').select('*').eq('expert_id', expertId).order('created_at', { ascending: false }),
        sb.from('expert_media').select('*').eq('expert_id', expertId).order('created_at', { ascending: false }).limit(12)
      ]);
      
      const expert = expertRes.data;
      const albums = albumsRes.data || [];
      const mediaItems = mediaRes.data || [];
      
      if (!expert) {
        detailsEl.innerHTML = '<div class="search-detail-loading">–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
        return;
      }
      
      // –ü–æ–ª—É—á–∞–µ–º signed URLs –¥–ª—è –º–µ–¥–∏–∞
      const mediaPaths = mediaItems.map(m => m.path).filter(Boolean);
      const mediaUrlByPath = {};
      
      if (mediaPaths.length > 0) {
        const { data: signedData } = await sb.storage.from(BUCKET).createSignedUrls(mediaPaths, 3600);
        (signedData || []).forEach(item => {
          if (item?.path && item?.signedUrl) {
            mediaUrlByPath[item.path] = item.signedUrl;
          }
        });
      }
      
      // –§–æ—Ä–º–∏—Ä—É–µ–º HTML
      let html = '';
      
      // –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
      if (expert.description) {
        html += '<div class="search-detail-description">' + escapeHtml(expert.description) + '</div>';
      }
      
      // –ú–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
      html += '<div class="search-detail-meta">';
      if (expert.price_from) {
        html += '<div class="search-detail-meta-item">üí∞ <strong>' + escapeHtml(expert.price_from) + '</strong></div>';
      }
      if (expert.delivery_time) {
        html += '<div class="search-detail-meta-item">‚è± <strong>' + escapeHtml(expert.delivery_time) + '</strong></div>';
      }
      html += '</div>';
      
      // –ê–ª—å–±–æ–º—ã
      if (albums.length > 0) {
        html += '<div class="search-detail-albums">';
        html += '<div class="search-detail-albums-title">üìÅ –ê–ª—å–±–æ–º—ã:</div>';
        albums.forEach(album => {
          html += '<span class="search-detail-album">' + escapeHtml(album.title) + '</span>';
        });
        html += '</div>';
      }
      
      // –ì–∞–ª–µ—Ä–µ—è
      if (mediaItems.length > 0) {
        html += '<div class="search-detail-gallery">';
        mediaItems.slice(0, 8).forEach(media => {
          const mediaUrl = media.path ? (mediaUrlByPath[media.path] || '') : '';
          if (mediaUrl) {
            const isVideo = String(media.type || '').toLowerCase() === 'video';
            if (isVideo) {
              html += '<div class="search-detail-gallery-item"><video src="' + escapeAttr(mediaUrl) + '" muted preload="metadata"></video></div>';
            } else {
              html += '<div class="search-detail-gallery-item"><img src="' + escapeAttr(mediaUrl) + '" alt=""></div>';
            }
          }
        });
        html += '</div>';
      }
      
      // –ö–Ω–æ–ø–∫–∞ —Å–≤–µ—Ä–Ω—É—Ç—å
      html += '<div class="search-collapse-btn" onclick="window.toggleExpertCard(this.closest(\'.search-result-card\'))">‚ñ≤ –°–≤–µ—Ä–Ω—É—Ç—å</div>';
      
      detailsEl.innerHTML = html;
      detailsEl.dataset.loaded = 'true';
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
      const tgLink = buildTelegramLink(expert.telegram);
      const profileHref = CARD_PATH + '?id=' + encodeURIComponent(expertId);
      
      let actionsHtml = '<a class="btn primary" href="' + escapeAttr(profileHref) + '">–ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å ‚Üí</a>';
      if (tgLink) {
        actionsHtml += '<a class="btn" href="' + escapeAttr(tgLink) + '" target="_blank" rel="noopener">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>';
      }
      actionsEl.innerHTML = actionsHtml;
      
    } catch (err) {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ—Ç–∞–ª–µ–π:', err);
      detailsEl.innerHTML = '<div class="search-detail-loading">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</div>';
    }
  }
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
  if (closeBtn) closeBtn.addEventListener('click', closeSearchModal);
  if (overlay) overlay.addEventListener('click', closeSearchModal);
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && modal && modal.style.display === 'flex') {
      closeSearchModal();
    }
  });
  
  // –ñ–¥—ë–º Supabase
  async function waitSbForSearch() {
    for (let i = 0; i < 60; i++) {
      if (window.AI_BIRZHA && window.AI_BIRZHA.sb) return window.AI_BIRZHA.sb;
      await new Promise(r => setTimeout(r, 100));
    }
    return null;
  }
  
  // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞
  async function performSearch(query) {
    const sb = await waitSbForSearch();
    if (!sb) {
      loadingEl.style.display = 'none';
      emptyEl.style.display = '';
      console.error('Supabase –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω');
      return;
    }
    
    try {
      // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞
      const { data, error } = await sb.rpc('search_experts', {
        query_text: query
      });
      
      if (error) {
        console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:', error);
        loadingEl.style.display = 'none';
        emptyEl.style.display = '';
        return;
      }
      
      if (!data || data.length === 0) {
        loadingEl.style.display = 'none';
        emptyEl.style.display = '';
        titleEl.textContent = '–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ';
        return;
      }
      
      // –ü–æ–ª—É—á–∞–µ–º signed URLs –¥–ª—è –æ–±–ª–æ–∂–µ–∫
      const paths = data.map(x => x.cover_path).filter(Boolean);
      const urlByPath = {};
      
      if (paths.length > 0) {
        const { data: signedData } = await sb.storage.from(BUCKET).createSignedUrls(paths, 3600);
        (signedData || []).forEach(item => {
          if (item?.path && item?.signedUrl) {
            urlByPath[item.path] = item.signedUrl;
          }
        });
      }
      
      // –†–µ–Ω–¥–µ—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
      loadingEl.style.display = 'none';
      resultsEl.style.display = '';
      titleEl.textContent = '–ù–∞–π–¥–µ–Ω–æ: ' + data.length + ' –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª' + getWordEnding(data.length);
      
      resultsEl.innerHTML = data.map(expert => {
        const coverUrl = expert.cover_path ? (urlByPath[expert.cover_path] || '') : '';
        const coverType = String(expert.cover_type || '').toLowerCase();
        const expertId = expert.id;
        const relevancePercent = Math.min(100, Math.round(expert.relevance));
        const catLabel = CAT_LABELS[expert.category] || expert.category;
        
        // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–≥–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
        const matchesHtml = (expert.matched_in || [])
          .filter(m => m)
          .slice(0, 4)
          .map(m => '<span class="search-match-tag">‚úì ' + escapeHtml(m) + '</span>')
          .join('');
        
        // –û–±–ª–æ–∂–∫–∞
        let coverHtml;
        if (coverUrl) {
          if (coverType === 'video') {
            coverHtml = '<video src="' + escapeAttr(coverUrl) + '" muted preload="metadata"></video>';
          } else {
            coverHtml = '<img src="' + escapeAttr(coverUrl) + '" alt="">';
          }
        } else {
          coverHtml = '<div class="placeholder">üë§</div>';
        }
        
        // Telegram —Å—Å—ã–ª–∫–∞
        const tgLink = buildTelegramLink(expert.telegram);
        const tgBtnHtml = tgLink 
          ? '<a class="btn tg-link" href="' + escapeAttr(tgLink) + '" target="_blank" rel="noopener">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å</a>'
          : '';
        
        return `
          <div class="search-result-card" data-expert-id="${escapeAttr(expertId)}">
            <div class="search-result-header">
              <div class="search-result-cover">${coverHtml}</div>
              <div class="search-result-info">
                <h3 class="search-result-name">
                  ${escapeHtml(expert.name)}
                  <span class="search-result-relevance">${relevancePercent}%</span>
                </h3>
                <div class="search-result-category">${escapeHtml(catLabel)} ‚Ä¢ ${escapeHtml(expert.role || '')}</div>
                <p class="search-result-short">${escapeHtml(expert.short_info || '‚Äî')}</p>
              </div>
            </div>
            ${matchesHtml ? '<div class="search-result-matches">' + matchesHtml + '</div>' : ''}
            <div class="expand-toggle">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</div>
            <div class="search-result-details" data-loaded="false">
              <div class="search-detail-loading">
                <div class="mini-spinner"></div>
                <div>–ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ...</div>
              </div>
            </div>
            <div class="search-result-actions">
              ${tgBtnHtml}
            </div>
          </div>
        `;
      }).join('');
      
      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
      resultsEl.querySelectorAll('.search-result-card').forEach(card => {
        // –ö–ª–∏–∫ –Ω–∞ –≤—Å—é –∫–∞—Ä—Ç–æ—á–∫—É –∫—Ä–æ–º–µ –∫–Ω–æ–ø–æ–∫
        card.addEventListener('click', function(e) {
          // –ù–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ —Å—Å—ã–ª–∫–∞—Ö –∏ –∫–Ω–æ–ø–∫–∞—Ö
          if (e.target.closest('a, button')) return;
          window.toggleExpertCard(card);
        });
      });
      
    } catch (err) {
      console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:', err);
      loadingEl.style.display = 'none';
      emptyEl.style.display = '';
    }
  }
  
  // –•–µ–ª–ø–µ—Ä—ã
  function escapeHtml(str) {
    return String(str || '').replace(/[&<>"']/g, m => ({
      '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;'
    }[m]));
  }
  
  function escapeAttr(str) {
    return escapeHtml(str).replace(/"/g, '&quot;');
  }
  
  function buildTelegramLink(raw) {
    if (!raw) return null;
    const t = raw.trim();
    if (!t) return null;
    if (t.startsWith('@')) return 'https://t.me/' + t.slice(1);
    if (t.includes('t.me/')) return t;
    return 'https://t.me/' + t;
  }
  
  function getWordEnding(count) {
    const lastTwo = count % 100;
    const lastOne = count % 10;
    if (lastTwo >= 11 && lastTwo <= 14) return '–µ–π';
    if (lastOne === 1) return '—å';
    if (lastOne >= 2 && lastOne <= 4) return '—è';
    return '–µ–π';
  }
  
  // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –ø–æ–∏—Å–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  document.addEventListener('DOMContentLoaded', function() {
    const searchForms = document.querySelectorAll('form[data-search]');
    
    searchForms.forEach(function(form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const input = form.querySelector('input[name="q"]');
        const query = input ? input.value.trim() : '';
        
        if (!query) {
          alert('–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞');
          return;
        }
        
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–æ–∏—Å–∫–æ–º
        openSearchModal(query);
      });
    });
  });
})();
</script>

<script src="/js/mobile-menu.js?v=20260104c1"></script>
</body> </html>